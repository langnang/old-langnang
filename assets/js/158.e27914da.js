(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{625:function(s,n,e){"use strict";e.r(n);var a=e(18),r=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"report-诊断报告-node-js-api-文档"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#report-诊断报告-node-js-api-文档"}},[s._v("#")]),s._v(" report 诊断报告 | Node.js API 文档")]),s._v(" "),e("blockquote",[e("h2",{attrs:{id:"excerpt"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#excerpt"}},[s._v("#")]),s._v(" Excerpt")]),s._v(" "),e("p",[s._v("中英对照")])]),s._v(" "),e("hr"),s._v(" "),e("p",[e("a",{attrs:{href:"http://nodejs.cn/api-v12/report/diagnostic_report.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("中英对照"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("提供 JSON 格式的诊断摘要，写入文件。")]),s._v(" "),e("p",[s._v("该报告旨在用于开发、测试和生产用途，以捕获和保存用于问题确定的信息。 它包括 JavaScript 和原生堆栈跟踪、堆统计、平台信息、资源使用情况等。 启用报告选项后，除了通过 API 调用以编程方式触发之外，还可以在未处理的异常、致命错误和用户信号上触发诊断报告。")]),s._v(" "),e("p",[s._v("下面提供了针对未捕获异常生成的完整示例报告以供参考。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('{\n  "header": {\n    "reportVersion": 1,\n    "event": "exception",\n    "trigger": "Exception",\n    "filename": "report.20181221.005011.8974.0.001.json",\n    "dumpEventTime": "2018-12-21T00:50:11Z",\n    "dumpEventTimeStamp": "1545371411331",\n    "processId": 8974,\n    "cwd": "/home/nodeuser/project/node",\n    "commandLine": [\n      "/home/nodeuser/project/node/out/Release/node",\n      "--report-uncaught-exception",\n      "/home/nodeuser/project/node/test/report/test-exception.js",\n      "child"\n    ],\n    "nodejsVersion": "v12.0.0-pre",\n    "glibcVersionRuntime": "2.17",\n    "glibcVersionCompiler": "2.17",\n    "wordSize": "64 bit",\n    "arch": "x64",\n    "platform": "linux",\n    "componentVersions": {\n      "node": "12.0.0-pre",\n      "v8": "7.1.302.28-node.5",\n      "uv": "1.24.1",\n      "zlib": "1.2.11",\n      "ares": "1.15.0",\n      "modules": "68",\n      "nghttp2": "1.34.0",\n      "napi": "3",\n      "llhttp": "1.0.1",\n      "http_parser": "2.8.0",\n      "openssl": "1.1.0j"\n    },\n    "release": {\n      "name": "node"\n    },\n    "osName": "Linux",\n    "osRelease": "3.10.0-862.el7.x86_64",\n    "osVersion": "#1 SMP Wed Mar 21 18:14:51 EDT 2018",\n    "osMachine": "x86_64",\n    "cpus": [\n      {\n        "model": "Intel(R) Core(TM) i7-6820HQ CPU @ 2.70GHz",\n        "speed": 2700,\n        "user": 88902660,\n        "nice": 0,\n        "sys": 50902570,\n        "idle": 241732220,\n        "irq": 0\n      },\n      {\n        "model": "Intel(R) Core(TM) i7-6820HQ CPU @ 2.70GHz",\n        "speed": 2700,\n        "user": 88902660,\n        "nice": 0,\n        "sys": 50902570,\n        "idle": 241732220,\n        "irq": 0\n      }\n    ],\n    "networkInterfaces": [\n      {\n        "name": "en0",\n        "internal": false,\n        "mac": "13:10:de:ad:be:ef",\n        "address": "10.0.0.37",\n        "netmask": "255.255.255.0",\n        "family": "IPv4"\n      }\n    ],\n    "host": "test_machine"\n  },\n  "javascriptStack": {\n    "message": "Error: *** test-exception.js: throwing uncaught Error",\n    "stack": [\n      "at myException (/home/nodeuser/project/node/test/report/test-exception.js:9:11)",\n      "at Object.<anonymous> (/home/nodeuser/project/node/test/report/test-exception.js:12:3)",\n      "at Module._compile (internal/modules/cjs/loader.js:718:30)",\n      "at Object.Module._extensions..js (internal/modules/cjs/loader.js:729:10)",\n      "at Module.load (internal/modules/cjs/loader.js:617:32)",\n      "at tryModuleLoad (internal/modules/cjs/loader.js:560:12)",\n      "at Function.Module._load (internal/modules/cjs/loader.js:552:3)",\n      "at Function.Module.runMain (internal/modules/cjs/loader.js:771:12)",\n      "at executeUserCode (internal/bootstrap/node.js:332:15)"\n    ]\n  },\n  "nativeStack": [\n    {\n      "pc": "0x000055b57f07a9ef",\n      "symbol": "report::GetNodeReport(v8::Isolate*, node::Environment*, char const*, char const*, v8::Local<v8::String>, std::ostream&) [./node]"\n    },\n    {\n      "pc": "0x000055b57f07cf03",\n      "symbol": "report::GetReport(v8::FunctionCallbackInfo<v8::Value> const&) [./node]"\n    },\n    {\n      "pc": "0x000055b57f1bccfd",\n      "symbol": " [./node]"\n    },\n    {\n      "pc": "0x000055b57f1be048",\n      "symbol": "v8::internal::Builtin_HandleApiCall(int, v8::internal::Object**, v8::internal::Isolate*) [./node]"\n    },\n    {\n      "pc": "0x000055b57feeda0e",\n      "symbol": " [./node]"\n    }\n  ],\n  "javascriptHeap": {\n    "totalMemory": 6127616,\n    "totalCommittedMemory": 4357352,\n    "usedMemory": 3221136,\n    "availableMemory": 1521370240,\n    "memoryLimit": 1526909922,\n    "heapSpaces": {\n      "read_only_space": {\n        "memorySize": 524288,\n        "committedMemory": 39208,\n        "capacity": 515584,\n        "used": 30504,\n        "available": 485080\n      },\n      "new_space": {\n        "memorySize": 2097152,\n        "committedMemory": 2019312,\n        "capacity": 1031168,\n        "used": 985496,\n        "available": 45672\n      },\n      "old_space": {\n        "memorySize": 2273280,\n        "committedMemory": 1769008,\n        "capacity": 1974640,\n        "used": 1725488,\n        "available": 249152\n      },\n      "code_space": {\n        "memorySize": 696320,\n        "committedMemory": 184896,\n        "capacity": 152128,\n        "used": 152128,\n        "available": 0\n      },\n      "map_space": {\n        "memorySize": 536576,\n        "committedMemory": 344928,\n        "capacity": 327520,\n        "used": 327520,\n        "available": 0\n      },\n      "large_object_space": {\n        "memorySize": 0,\n        "committedMemory": 0,\n        "capacity": 1520590336,\n        "used": 0,\n        "available": 1520590336\n      },\n      "new_large_object_space": {\n        "memorySize": 0,\n        "committedMemory": 0,\n        "capacity": 0,\n        "used": 0,\n        "available": 0\n      }\n    }\n  },\n  "resourceUsage": {\n    "userCpuSeconds": 0.069595,\n    "kernelCpuSeconds": 0.019163,\n    "cpuConsumptionPercent": 0.000000,\n    "maxRss": 18079744,\n    "pageFaults": {\n      "IORequired": 0,\n      "IONotRequired": 4610\n    },\n    "fsActivity": {\n      "reads": 0,\n      "writes": 0\n    }\n  },\n  "uvthreadResourceUsage": {\n    "userCpuSeconds": 0.068457,\n    "kernelCpuSeconds": 0.019127,\n    "cpuConsumptionPercent": 0.000000,\n    "fsActivity": {\n      "reads": 0,\n      "writes": 0\n    }\n  },\n  "libuv": [\n    {\n      "type": "async",\n      "is_active": true,\n      "is_referenced": false,\n      "address": "0x0000000102910900",\n      "details": ""\n    },\n    {\n      "type": "timer",\n      "is_active": false,\n      "is_referenced": false,\n      "address": "0x00007fff5fbfeab0",\n      "repeat": 0,\n      "firesInMsFromNow": 94403548320796,\n      "expired": true\n    },\n    {\n      "type": "check",\n      "is_active": true,\n      "is_referenced": false,\n      "address": "0x00007fff5fbfeb48"\n    },\n    {\n      "type": "idle",\n      "is_active": false,\n      "is_referenced": true,\n      "address": "0x00007fff5fbfebc0"\n    },\n    {\n      "type": "prepare",\n      "is_active": false,\n      "is_referenced": false,\n      "address": "0x00007fff5fbfec38"\n    },\n    {\n      "type": "check",\n      "is_active": false,\n      "is_referenced": false,\n      "address": "0x00007fff5fbfecb0"\n    },\n    {\n      "type": "async",\n      "is_active": true,\n      "is_referenced": false,\n      "address": "0x000000010188f2e0"\n    },\n    {\n      "type": "tty",\n      "is_active": false,\n      "is_referenced": true,\n      "address": "0x000055b581db0e18",\n      "width": 204,\n      "height": 55,\n      "fd": 17,\n      "writeQueueSize": 0,\n      "readable": true,\n      "writable": true\n    },\n    {\n      "type": "signal",\n      "is_active": true,\n      "is_referenced": false,\n      "address": "0x000055b581d80010",\n      "signum": 28,\n      "signal": "SIGWINCH"\n    },\n    {\n      "type": "tty",\n      "is_active": true,\n      "is_referenced": true,\n      "address": "0x000055b581df59f8",\n      "width": 204,\n      "height": 55,\n      "fd": 19,\n      "writeQueueSize": 0,\n      "readable": true,\n      "writable": true\n    },\n    {\n      "type": "loop",\n      "is_active": true,\n      "address": "0x000055fc7b2cb180"\n    }\n  ],\n  "workers": [],\n  "environmentVariables": {\n    "REMOTEHOST": "REMOVED",\n    "MANPATH": "/opt/rh/devtoolset-3/root/usr/share/man:",\n    "XDG_SESSION_ID": "66126",\n    "HOSTNAME": "test_machine",\n    "HOST": "test_machine",\n    "TERM": "xterm-256color",\n    "SHELL": "/bin/csh",\n    "SSH_CLIENT": "REMOVED",\n    "PERL5LIB": "/opt/rh/devtoolset-3/root//usr/lib64/perl5/vendor_perl:/opt/rh/devtoolset-3/root/usr/lib/perl5:/opt/rh/devtoolset-3/root//usr/share/perl5/vendor_perl",\n    "OLDPWD": "/home/nodeuser/project/node/src",\n    "JAVACONFDIRS": "/opt/rh/devtoolset-3/root/etc/java:/etc/java",\n    "SSH_TTY": "/dev/pts/0",\n    "PCP_DIR": "/opt/rh/devtoolset-3/root",\n    "GROUP": "normaluser",\n    "USER": "nodeuser",\n    "LD_LIBRARY_PATH": "/opt/rh/devtoolset-3/root/usr/lib64:/opt/rh/devtoolset-3/root/usr/lib",\n    "HOSTTYPE": "x86_64-linux",\n    "XDG_CONFIG_DIRS": "/opt/rh/devtoolset-3/root/etc/xdg:/etc/xdg",\n    "MAIL": "/var/spool/mail/nodeuser",\n    "PATH": "/home/nodeuser/project/node:/opt/rh/devtoolset-3/root/usr/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin",\n    "PWD": "/home/nodeuser/project/node",\n    "LANG": "en_US.UTF-8",\n    "PS1": "\\\\u@\\\\h : \\\\[\\\\e[31m\\\\]\\\\w\\\\[\\\\e[m\\\\] >  ",\n    "SHLVL": "2",\n    "HOME": "/home/nodeuser",\n    "OSTYPE": "linux",\n    "VENDOR": "unknown",\n    "PYTHONPATH": "/opt/rh/devtoolset-3/root/usr/lib64/python2.7/site-packages:/opt/rh/devtoolset-3/root/usr/lib/python2.7/site-packages",\n    "MACHTYPE": "x86_64",\n    "LOGNAME": "nodeuser",\n    "XDG_DATA_DIRS": "/opt/rh/devtoolset-3/root/usr/share:/usr/local/share:/usr/share",\n    "LESSOPEN": "||/usr/bin/lesspipe.sh %s",\n    "INFOPATH": "/opt/rh/devtoolset-3/root/usr/share/info",\n    "XDG_RUNTIME_DIR": "/run/user/50141",\n    "_": "./node"\n  },\n  "userLimits": {\n    "core_file_size_blocks": {\n      "soft": "",\n      "hard": "unlimited"\n    },\n    "data_seg_size_kbytes": {\n      "soft": "unlimited",\n      "hard": "unlimited"\n    },\n    "file_size_blocks": {\n      "soft": "unlimited",\n      "hard": "unlimited"\n    },\n    "max_locked_memory_bytes": {\n      "soft": "unlimited",\n      "hard": 65536\n    },\n    "max_memory_size_kbytes": {\n      "soft": "unlimited",\n      "hard": "unlimited"\n    },\n    "open_files": {\n      "soft": "unlimited",\n      "hard": 4096\n    },\n    "stack_size_bytes": {\n      "soft": "unlimited",\n      "hard": "unlimited"\n    },\n    "cpu_time_seconds": {\n      "soft": "unlimited",\n      "hard": "unlimited"\n    },\n    "max_user_processes": {\n      "soft": "unlimited",\n      "hard": 4127290\n    },\n    "virtual_memory_kbytes": {\n      "soft": "unlimited",\n      "hard": "unlimited"\n    }\n  },\n  "sharedObjects": [\n    "/lib64/libdl.so.2",\n    "/lib64/librt.so.1",\n    "/lib64/libstdc++.so.6",\n    "/lib64/libm.so.6",\n    "/lib64/libgcc_s.so.1",\n    "/lib64/libpthread.so.0",\n    "/lib64/libc.so.6",\n    "/lib64/ld-linux-x86-64.so.2"\n  ]\n}\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br"),e("span",{staticClass:"line-number"},[s._v("63")]),e("br"),e("span",{staticClass:"line-number"},[s._v("64")]),e("br"),e("span",{staticClass:"line-number"},[s._v("65")]),e("br"),e("span",{staticClass:"line-number"},[s._v("66")]),e("br"),e("span",{staticClass:"line-number"},[s._v("67")]),e("br"),e("span",{staticClass:"line-number"},[s._v("68")]),e("br"),e("span",{staticClass:"line-number"},[s._v("69")]),e("br"),e("span",{staticClass:"line-number"},[s._v("70")]),e("br"),e("span",{staticClass:"line-number"},[s._v("71")]),e("br"),e("span",{staticClass:"line-number"},[s._v("72")]),e("br"),e("span",{staticClass:"line-number"},[s._v("73")]),e("br"),e("span",{staticClass:"line-number"},[s._v("74")]),e("br"),e("span",{staticClass:"line-number"},[s._v("75")]),e("br"),e("span",{staticClass:"line-number"},[s._v("76")]),e("br"),e("span",{staticClass:"line-number"},[s._v("77")]),e("br"),e("span",{staticClass:"line-number"},[s._v("78")]),e("br"),e("span",{staticClass:"line-number"},[s._v("79")]),e("br"),e("span",{staticClass:"line-number"},[s._v("80")]),e("br"),e("span",{staticClass:"line-number"},[s._v("81")]),e("br"),e("span",{staticClass:"line-number"},[s._v("82")]),e("br"),e("span",{staticClass:"line-number"},[s._v("83")]),e("br"),e("span",{staticClass:"line-number"},[s._v("84")]),e("br"),e("span",{staticClass:"line-number"},[s._v("85")]),e("br"),e("span",{staticClass:"line-number"},[s._v("86")]),e("br"),e("span",{staticClass:"line-number"},[s._v("87")]),e("br"),e("span",{staticClass:"line-number"},[s._v("88")]),e("br"),e("span",{staticClass:"line-number"},[s._v("89")]),e("br"),e("span",{staticClass:"line-number"},[s._v("90")]),e("br"),e("span",{staticClass:"line-number"},[s._v("91")]),e("br"),e("span",{staticClass:"line-number"},[s._v("92")]),e("br"),e("span",{staticClass:"line-number"},[s._v("93")]),e("br"),e("span",{staticClass:"line-number"},[s._v("94")]),e("br"),e("span",{staticClass:"line-number"},[s._v("95")]),e("br"),e("span",{staticClass:"line-number"},[s._v("96")]),e("br"),e("span",{staticClass:"line-number"},[s._v("97")]),e("br"),e("span",{staticClass:"line-number"},[s._v("98")]),e("br"),e("span",{staticClass:"line-number"},[s._v("99")]),e("br"),e("span",{staticClass:"line-number"},[s._v("100")]),e("br"),e("span",{staticClass:"line-number"},[s._v("101")]),e("br"),e("span",{staticClass:"line-number"},[s._v("102")]),e("br"),e("span",{staticClass:"line-number"},[s._v("103")]),e("br"),e("span",{staticClass:"line-number"},[s._v("104")]),e("br"),e("span",{staticClass:"line-number"},[s._v("105")]),e("br"),e("span",{staticClass:"line-number"},[s._v("106")]),e("br"),e("span",{staticClass:"line-number"},[s._v("107")]),e("br"),e("span",{staticClass:"line-number"},[s._v("108")]),e("br"),e("span",{staticClass:"line-number"},[s._v("109")]),e("br"),e("span",{staticClass:"line-number"},[s._v("110")]),e("br"),e("span",{staticClass:"line-number"},[s._v("111")]),e("br"),e("span",{staticClass:"line-number"},[s._v("112")]),e("br"),e("span",{staticClass:"line-number"},[s._v("113")]),e("br"),e("span",{staticClass:"line-number"},[s._v("114")]),e("br"),e("span",{staticClass:"line-number"},[s._v("115")]),e("br"),e("span",{staticClass:"line-number"},[s._v("116")]),e("br"),e("span",{staticClass:"line-number"},[s._v("117")]),e("br"),e("span",{staticClass:"line-number"},[s._v("118")]),e("br"),e("span",{staticClass:"line-number"},[s._v("119")]),e("br"),e("span",{staticClass:"line-number"},[s._v("120")]),e("br"),e("span",{staticClass:"line-number"},[s._v("121")]),e("br"),e("span",{staticClass:"line-number"},[s._v("122")]),e("br"),e("span",{staticClass:"line-number"},[s._v("123")]),e("br"),e("span",{staticClass:"line-number"},[s._v("124")]),e("br"),e("span",{staticClass:"line-number"},[s._v("125")]),e("br"),e("span",{staticClass:"line-number"},[s._v("126")]),e("br"),e("span",{staticClass:"line-number"},[s._v("127")]),e("br"),e("span",{staticClass:"line-number"},[s._v("128")]),e("br"),e("span",{staticClass:"line-number"},[s._v("129")]),e("br"),e("span",{staticClass:"line-number"},[s._v("130")]),e("br"),e("span",{staticClass:"line-number"},[s._v("131")]),e("br"),e("span",{staticClass:"line-number"},[s._v("132")]),e("br"),e("span",{staticClass:"line-number"},[s._v("133")]),e("br"),e("span",{staticClass:"line-number"},[s._v("134")]),e("br"),e("span",{staticClass:"line-number"},[s._v("135")]),e("br"),e("span",{staticClass:"line-number"},[s._v("136")]),e("br"),e("span",{staticClass:"line-number"},[s._v("137")]),e("br"),e("span",{staticClass:"line-number"},[s._v("138")]),e("br"),e("span",{staticClass:"line-number"},[s._v("139")]),e("br"),e("span",{staticClass:"line-number"},[s._v("140")]),e("br"),e("span",{staticClass:"line-number"},[s._v("141")]),e("br"),e("span",{staticClass:"line-number"},[s._v("142")]),e("br"),e("span",{staticClass:"line-number"},[s._v("143")]),e("br"),e("span",{staticClass:"line-number"},[s._v("144")]),e("br"),e("span",{staticClass:"line-number"},[s._v("145")]),e("br"),e("span",{staticClass:"line-number"},[s._v("146")]),e("br"),e("span",{staticClass:"line-number"},[s._v("147")]),e("br"),e("span",{staticClass:"line-number"},[s._v("148")]),e("br"),e("span",{staticClass:"line-number"},[s._v("149")]),e("br"),e("span",{staticClass:"line-number"},[s._v("150")]),e("br"),e("span",{staticClass:"line-number"},[s._v("151")]),e("br"),e("span",{staticClass:"line-number"},[s._v("152")]),e("br"),e("span",{staticClass:"line-number"},[s._v("153")]),e("br"),e("span",{staticClass:"line-number"},[s._v("154")]),e("br"),e("span",{staticClass:"line-number"},[s._v("155")]),e("br"),e("span",{staticClass:"line-number"},[s._v("156")]),e("br"),e("span",{staticClass:"line-number"},[s._v("157")]),e("br"),e("span",{staticClass:"line-number"},[s._v("158")]),e("br"),e("span",{staticClass:"line-number"},[s._v("159")]),e("br"),e("span",{staticClass:"line-number"},[s._v("160")]),e("br"),e("span",{staticClass:"line-number"},[s._v("161")]),e("br"),e("span",{staticClass:"line-number"},[s._v("162")]),e("br"),e("span",{staticClass:"line-number"},[s._v("163")]),e("br"),e("span",{staticClass:"line-number"},[s._v("164")]),e("br"),e("span",{staticClass:"line-number"},[s._v("165")]),e("br"),e("span",{staticClass:"line-number"},[s._v("166")]),e("br"),e("span",{staticClass:"line-number"},[s._v("167")]),e("br"),e("span",{staticClass:"line-number"},[s._v("168")]),e("br"),e("span",{staticClass:"line-number"},[s._v("169")]),e("br"),e("span",{staticClass:"line-number"},[s._v("170")]),e("br"),e("span",{staticClass:"line-number"},[s._v("171")]),e("br"),e("span",{staticClass:"line-number"},[s._v("172")]),e("br"),e("span",{staticClass:"line-number"},[s._v("173")]),e("br"),e("span",{staticClass:"line-number"},[s._v("174")]),e("br"),e("span",{staticClass:"line-number"},[s._v("175")]),e("br"),e("span",{staticClass:"line-number"},[s._v("176")]),e("br"),e("span",{staticClass:"line-number"},[s._v("177")]),e("br"),e("span",{staticClass:"line-number"},[s._v("178")]),e("br"),e("span",{staticClass:"line-number"},[s._v("179")]),e("br"),e("span",{staticClass:"line-number"},[s._v("180")]),e("br"),e("span",{staticClass:"line-number"},[s._v("181")]),e("br"),e("span",{staticClass:"line-number"},[s._v("182")]),e("br"),e("span",{staticClass:"line-number"},[s._v("183")]),e("br"),e("span",{staticClass:"line-number"},[s._v("184")]),e("br"),e("span",{staticClass:"line-number"},[s._v("185")]),e("br"),e("span",{staticClass:"line-number"},[s._v("186")]),e("br"),e("span",{staticClass:"line-number"},[s._v("187")]),e("br"),e("span",{staticClass:"line-number"},[s._v("188")]),e("br"),e("span",{staticClass:"line-number"},[s._v("189")]),e("br"),e("span",{staticClass:"line-number"},[s._v("190")]),e("br"),e("span",{staticClass:"line-number"},[s._v("191")]),e("br"),e("span",{staticClass:"line-number"},[s._v("192")]),e("br"),e("span",{staticClass:"line-number"},[s._v("193")]),e("br"),e("span",{staticClass:"line-number"},[s._v("194")]),e("br"),e("span",{staticClass:"line-number"},[s._v("195")]),e("br"),e("span",{staticClass:"line-number"},[s._v("196")]),e("br"),e("span",{staticClass:"line-number"},[s._v("197")]),e("br"),e("span",{staticClass:"line-number"},[s._v("198")]),e("br"),e("span",{staticClass:"line-number"},[s._v("199")]),e("br"),e("span",{staticClass:"line-number"},[s._v("200")]),e("br"),e("span",{staticClass:"line-number"},[s._v("201")]),e("br"),e("span",{staticClass:"line-number"},[s._v("202")]),e("br"),e("span",{staticClass:"line-number"},[s._v("203")]),e("br"),e("span",{staticClass:"line-number"},[s._v("204")]),e("br"),e("span",{staticClass:"line-number"},[s._v("205")]),e("br"),e("span",{staticClass:"line-number"},[s._v("206")]),e("br"),e("span",{staticClass:"line-number"},[s._v("207")]),e("br"),e("span",{staticClass:"line-number"},[s._v("208")]),e("br"),e("span",{staticClass:"line-number"},[s._v("209")]),e("br"),e("span",{staticClass:"line-number"},[s._v("210")]),e("br"),e("span",{staticClass:"line-number"},[s._v("211")]),e("br"),e("span",{staticClass:"line-number"},[s._v("212")]),e("br"),e("span",{staticClass:"line-number"},[s._v("213")]),e("br"),e("span",{staticClass:"line-number"},[s._v("214")]),e("br"),e("span",{staticClass:"line-number"},[s._v("215")]),e("br"),e("span",{staticClass:"line-number"},[s._v("216")]),e("br"),e("span",{staticClass:"line-number"},[s._v("217")]),e("br"),e("span",{staticClass:"line-number"},[s._v("218")]),e("br"),e("span",{staticClass:"line-number"},[s._v("219")]),e("br"),e("span",{staticClass:"line-number"},[s._v("220")]),e("br"),e("span",{staticClass:"line-number"},[s._v("221")]),e("br"),e("span",{staticClass:"line-number"},[s._v("222")]),e("br"),e("span",{staticClass:"line-number"},[s._v("223")]),e("br"),e("span",{staticClass:"line-number"},[s._v("224")]),e("br"),e("span",{staticClass:"line-number"},[s._v("225")]),e("br"),e("span",{staticClass:"line-number"},[s._v("226")]),e("br"),e("span",{staticClass:"line-number"},[s._v("227")]),e("br"),e("span",{staticClass:"line-number"},[s._v("228")]),e("br"),e("span",{staticClass:"line-number"},[s._v("229")]),e("br"),e("span",{staticClass:"line-number"},[s._v("230")]),e("br"),e("span",{staticClass:"line-number"},[s._v("231")]),e("br"),e("span",{staticClass:"line-number"},[s._v("232")]),e("br"),e("span",{staticClass:"line-number"},[s._v("233")]),e("br"),e("span",{staticClass:"line-number"},[s._v("234")]),e("br"),e("span",{staticClass:"line-number"},[s._v("235")]),e("br"),e("span",{staticClass:"line-number"},[s._v("236")]),e("br"),e("span",{staticClass:"line-number"},[s._v("237")]),e("br"),e("span",{staticClass:"line-number"},[s._v("238")]),e("br"),e("span",{staticClass:"line-number"},[s._v("239")]),e("br"),e("span",{staticClass:"line-number"},[s._v("240")]),e("br"),e("span",{staticClass:"line-number"},[s._v("241")]),e("br"),e("span",{staticClass:"line-number"},[s._v("242")]),e("br"),e("span",{staticClass:"line-number"},[s._v("243")]),e("br"),e("span",{staticClass:"line-number"},[s._v("244")]),e("br"),e("span",{staticClass:"line-number"},[s._v("245")]),e("br"),e("span",{staticClass:"line-number"},[s._v("246")]),e("br"),e("span",{staticClass:"line-number"},[s._v("247")]),e("br"),e("span",{staticClass:"line-number"},[s._v("248")]),e("br"),e("span",{staticClass:"line-number"},[s._v("249")]),e("br"),e("span",{staticClass:"line-number"},[s._v("250")]),e("br"),e("span",{staticClass:"line-number"},[s._v("251")]),e("br"),e("span",{staticClass:"line-number"},[s._v("252")]),e("br"),e("span",{staticClass:"line-number"},[s._v("253")]),e("br"),e("span",{staticClass:"line-number"},[s._v("254")]),e("br"),e("span",{staticClass:"line-number"},[s._v("255")]),e("br"),e("span",{staticClass:"line-number"},[s._v("256")]),e("br"),e("span",{staticClass:"line-number"},[s._v("257")]),e("br"),e("span",{staticClass:"line-number"},[s._v("258")]),e("br"),e("span",{staticClass:"line-number"},[s._v("259")]),e("br"),e("span",{staticClass:"line-number"},[s._v("260")]),e("br"),e("span",{staticClass:"line-number"},[s._v("261")]),e("br"),e("span",{staticClass:"line-number"},[s._v("262")]),e("br"),e("span",{staticClass:"line-number"},[s._v("263")]),e("br"),e("span",{staticClass:"line-number"},[s._v("264")]),e("br"),e("span",{staticClass:"line-number"},[s._v("265")]),e("br"),e("span",{staticClass:"line-number"},[s._v("266")]),e("br"),e("span",{staticClass:"line-number"},[s._v("267")]),e("br"),e("span",{staticClass:"line-number"},[s._v("268")]),e("br"),e("span",{staticClass:"line-number"},[s._v("269")]),e("br"),e("span",{staticClass:"line-number"},[s._v("270")]),e("br"),e("span",{staticClass:"line-number"},[s._v("271")]),e("br"),e("span",{staticClass:"line-number"},[s._v("272")]),e("br"),e("span",{staticClass:"line-number"},[s._v("273")]),e("br"),e("span",{staticClass:"line-number"},[s._v("274")]),e("br"),e("span",{staticClass:"line-number"},[s._v("275")]),e("br"),e("span",{staticClass:"line-number"},[s._v("276")]),e("br"),e("span",{staticClass:"line-number"},[s._v("277")]),e("br"),e("span",{staticClass:"line-number"},[s._v("278")]),e("br"),e("span",{staticClass:"line-number"},[s._v("279")]),e("br"),e("span",{staticClass:"line-number"},[s._v("280")]),e("br"),e("span",{staticClass:"line-number"},[s._v("281")]),e("br"),e("span",{staticClass:"line-number"},[s._v("282")]),e("br"),e("span",{staticClass:"line-number"},[s._v("283")]),e("br"),e("span",{staticClass:"line-number"},[s._v("284")]),e("br"),e("span",{staticClass:"line-number"},[s._v("285")]),e("br"),e("span",{staticClass:"line-number"},[s._v("286")]),e("br"),e("span",{staticClass:"line-number"},[s._v("287")]),e("br"),e("span",{staticClass:"line-number"},[s._v("288")]),e("br"),e("span",{staticClass:"line-number"},[s._v("289")]),e("br"),e("span",{staticClass:"line-number"},[s._v("290")]),e("br"),e("span",{staticClass:"line-number"},[s._v("291")]),e("br"),e("span",{staticClass:"line-number"},[s._v("292")]),e("br"),e("span",{staticClass:"line-number"},[s._v("293")]),e("br"),e("span",{staticClass:"line-number"},[s._v("294")]),e("br"),e("span",{staticClass:"line-number"},[s._v("295")]),e("br"),e("span",{staticClass:"line-number"},[s._v("296")]),e("br"),e("span",{staticClass:"line-number"},[s._v("297")]),e("br"),e("span",{staticClass:"line-number"},[s._v("298")]),e("br"),e("span",{staticClass:"line-number"},[s._v("299")]),e("br"),e("span",{staticClass:"line-number"},[s._v("300")]),e("br"),e("span",{staticClass:"line-number"},[s._v("301")]),e("br"),e("span",{staticClass:"line-number"},[s._v("302")]),e("br"),e("span",{staticClass:"line-number"},[s._v("303")]),e("br"),e("span",{staticClass:"line-number"},[s._v("304")]),e("br"),e("span",{staticClass:"line-number"},[s._v("305")]),e("br"),e("span",{staticClass:"line-number"},[s._v("306")]),e("br"),e("span",{staticClass:"line-number"},[s._v("307")]),e("br"),e("span",{staticClass:"line-number"},[s._v("308")]),e("br"),e("span",{staticClass:"line-number"},[s._v("309")]),e("br"),e("span",{staticClass:"line-number"},[s._v("310")]),e("br"),e("span",{staticClass:"line-number"},[s._v("311")]),e("br"),e("span",{staticClass:"line-number"},[s._v("312")]),e("br"),e("span",{staticClass:"line-number"},[s._v("313")]),e("br"),e("span",{staticClass:"line-number"},[s._v("314")]),e("br"),e("span",{staticClass:"line-number"},[s._v("315")]),e("br"),e("span",{staticClass:"line-number"},[s._v("316")]),e("br"),e("span",{staticClass:"line-number"},[s._v("317")]),e("br"),e("span",{staticClass:"line-number"},[s._v("318")]),e("br"),e("span",{staticClass:"line-number"},[s._v("319")]),e("br"),e("span",{staticClass:"line-number"},[s._v("320")]),e("br"),e("span",{staticClass:"line-number"},[s._v("321")]),e("br"),e("span",{staticClass:"line-number"},[s._v("322")]),e("br"),e("span",{staticClass:"line-number"},[s._v("323")]),e("br"),e("span",{staticClass:"line-number"},[s._v("324")]),e("br"),e("span",{staticClass:"line-number"},[s._v("325")]),e("br"),e("span",{staticClass:"line-number"},[s._v("326")]),e("br"),e("span",{staticClass:"line-number"},[s._v("327")]),e("br"),e("span",{staticClass:"line-number"},[s._v("328")]),e("br"),e("span",{staticClass:"line-number"},[s._v("329")]),e("br"),e("span",{staticClass:"line-number"},[s._v("330")]),e("br"),e("span",{staticClass:"line-number"},[s._v("331")]),e("br"),e("span",{staticClass:"line-number"},[s._v("332")]),e("br"),e("span",{staticClass:"line-number"},[s._v("333")]),e("br"),e("span",{staticClass:"line-number"},[s._v("334")]),e("br"),e("span",{staticClass:"line-number"},[s._v("335")]),e("br"),e("span",{staticClass:"line-number"},[s._v("336")]),e("br"),e("span",{staticClass:"line-number"},[s._v("337")]),e("br"),e("span",{staticClass:"line-number"},[s._v("338")]),e("br"),e("span",{staticClass:"line-number"},[s._v("339")]),e("br"),e("span",{staticClass:"line-number"},[s._v("340")]),e("br"),e("span",{staticClass:"line-number"},[s._v("341")]),e("br"),e("span",{staticClass:"line-number"},[s._v("342")]),e("br"),e("span",{staticClass:"line-number"},[s._v("343")]),e("br"),e("span",{staticClass:"line-number"},[s._v("344")]),e("br"),e("span",{staticClass:"line-number"},[s._v("345")]),e("br"),e("span",{staticClass:"line-number"},[s._v("346")]),e("br"),e("span",{staticClass:"line-number"},[s._v("347")]),e("br"),e("span",{staticClass:"line-number"},[s._v("348")]),e("br"),e("span",{staticClass:"line-number"},[s._v("349")]),e("br"),e("span",{staticClass:"line-number"},[s._v("350")]),e("br"),e("span",{staticClass:"line-number"},[s._v("351")]),e("br"),e("span",{staticClass:"line-number"},[s._v("352")]),e("br"),e("span",{staticClass:"line-number"},[s._v("353")]),e("br"),e("span",{staticClass:"line-number"},[s._v("354")]),e("br"),e("span",{staticClass:"line-number"},[s._v("355")]),e("br"),e("span",{staticClass:"line-number"},[s._v("356")]),e("br"),e("span",{staticClass:"line-number"},[s._v("357")]),e("br"),e("span",{staticClass:"line-number"},[s._v("358")]),e("br"),e("span",{staticClass:"line-number"},[s._v("359")]),e("br"),e("span",{staticClass:"line-number"},[s._v("360")]),e("br"),e("span",{staticClass:"line-number"},[s._v("361")]),e("br"),e("span",{staticClass:"line-number"},[s._v("362")]),e("br"),e("span",{staticClass:"line-number"},[s._v("363")]),e("br"),e("span",{staticClass:"line-number"},[s._v("364")]),e("br"),e("span",{staticClass:"line-number"},[s._v("365")]),e("br"),e("span",{staticClass:"line-number"},[s._v("366")]),e("br"),e("span",{staticClass:"line-number"},[s._v("367")]),e("br")])]),e("h3",{attrs:{id:"用法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#用法"}},[s._v("#")]),s._v(" 用法"),e("a",{attrs:{href:"http://nodejs.cn/api-v12/report.html#usage",target:"_blank",rel:"noopener noreferrer"}},[s._v("#"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"http://nodejs.cn/api-v12/report/usage.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("中英对照"),e("OutboundLink")],1)]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("node --report-uncaught-exception --report-on-signal \\\n--report-on-fatalerror app.js\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("ul",[e("li",[e("p",[e("code",[s._v("--report-uncaught-exception")]),s._v(" 启用对未捕获的异常生成报告。 当结合原生堆栈和其他运行时环境数据检查 JavaScript 堆栈时很有用。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("--report-on-signal")]),s._v(" 允许在接收到正在运行的 Node.js 进程的指定（或预定义）信号时生成报告。 （有关如何修改触发报告的信号，请参见下文。）默认信号为 "),e("code",[s._v("SIGUSR2")]),s._v("。 当需要从另一个程序触发报告时很有用。 应用程序监视器可以利用此特性定期收集报告并将丰富的内部运行时数据集绘制到其视图中。")])])]),s._v(" "),e("p",[s._v("Windows 不支持基于信号的报告生成。")]),s._v(" "),e("p",[s._v("一般情况下，不需要修改上报触发信号。 然而，如果 "),e("code",[s._v("SIGUSR2")]),s._v(" 已经被用于其他目的，则此标志有助于改变报告生成的信号，并为上述目的保留 "),e("code",[s._v("SIGUSR2")]),s._v(" 的原始含义。")]),s._v(" "),e("ul",[e("li",[e("p",[e("code",[s._v("--report-on-fatalerror")]),s._v(" 允许在导致应用程序终止的致命错误（Node.js 运行时中的内部错误，例如内存不足）时触发报告。 用于检查各种诊断数据元素，例如堆、堆栈、事件循环状态、资源消耗等 推断致命错误。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("--report-compact")]),s._v(" 以紧凑的单行 JSON 格式编写报告，与为人类设计的默认多行格式相比，日志处理系统更容易使用。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("--report-directory")]),s._v(" 生成报告的位置。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("--report-filename")]),s._v(" 将写入报告的文件的名称。")])]),s._v(" "),e("li",[e("p",[e("code",[s._v("--report-signal")]),s._v(" 设置或重置报告生成信号（Windows 不支持）。 默认信号为 "),e("code",[s._v("SIGUSR2")]),s._v("。")])])]),s._v(" "),e("p",[s._v("报告也可以通过 JavaScript 应用程序的 API 调用触发：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("process.report.writeReport();\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("此函数接受可选的额外参数 "),e("code",[s._v("filename")]),s._v("，其是写入报告的文件的名称。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("process.report.writeReport('./foo.json');\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("此函数接受可选的额外参数 "),e("code",[s._v("err")]),s._v("，其是 "),e("code",[s._v("Error")]),s._v(" 对象，将用作报告中打印的 JavaScript 堆栈的上下文。 当使用报告处理回调或异常句柄中的错误时，这允许报告包括原始错误的位置以及处理它的位置。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("try {\n  process.chdir('/non-existent-path');\n} catch (err) {\n  process.report.writeReport(err);\n}\n// 任何其他代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("如果文件名和错误对象都传给 "),e("code",[s._v("writeReport()")]),s._v("，则错误对象必须是第二个参数。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("try {\n  process.chdir('/non-existent-path');\n} catch (err) {\n  process.report.writeReport(filename, err);\n}\n// 任何其他代码\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("诊断报告的内容可以通过 JavaScript 应用程序的 API 调用作为 JavaScript 对象返回：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const report = process.report.getReport();\nconsole.log(typeof report === 'object'); // true\n\n// 类似于 process.report.writeReport() 输出\nconsole.log(JSON.stringify(report, null, 2));\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("此函数接受可选的额外参数 "),e("code",[s._v("err")]),s._v("，其是 "),e("code",[s._v("Error")]),s._v(" 对象，将用作报告中打印的 JavaScript 堆栈的上下文。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("const report = process.report.getReport(new Error('custom error'));\nconsole.log(typeof report === 'object'); // true\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("API 版本在从应用程序内部检查运行时状态时很有用，期望自我调整资源消耗、负载平衡、监控等。")]),s._v(" "),e("p",[s._v("报告的内容的组成部分是：包含事件类型、日期、时间、进程标识 和 Node.js 版本的标题部分，包含 JavaScript 和原生堆栈跟踪的部分，包含 V8 堆信息的部分，包含 "),e("code",[s._v("libuv")]),s._v(" 句柄信息的部分，以及显示 CPU 和内存使用情况以及系统限制的操作系统平台信息部分。 可以使用 Node.js 交互式解释器触发的示例报告：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("$ node\n> process.report.writeReport();\nWriting Node.js report to file: report.20181126.091102.8480.0.001.json\nNode.js report completed\n>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])]),e("p",[s._v("当写入报告时，将开始和结束消息发送到标准错误，并将报告的文件名返回给调用者。 默认文件名包括日期、时间、进程标识、以及序列号。 如果为同一个 Node.js 进程多次生成，则序列号有助于将报告转储与运行时状态相关联")]),s._v(" "),e("h3",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[s._v("#")]),s._v(" 配置"),e("a",{attrs:{href:"http://nodejs.cn/api-v12/report.html#configuration",target:"_blank",rel:"noopener noreferrer"}},[s._v("#"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"http://nodejs.cn/api-v12/report/configuration.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("中英对照"),e("OutboundLink")],1)]),s._v(" "),e("p",[s._v("报告生成的其他运行时配置可通过 "),e("code",[s._v("process.report")]),s._v(" 的以下属性获得：")]),s._v(" "),e("p",[s._v("当为 "),e("code",[s._v("true")]),s._v(" 时，"),e("code",[s._v("reportOnFatalError")]),s._v(" 触发致命错误的诊断报告。 默认为 "),e("code",[s._v("false")]),s._v("。")]),s._v(" "),e("p",[s._v("当为 "),e("code",[s._v("true")]),s._v(" 时，"),e("code",[s._v("reportOnSignal")]),s._v(" 触发信号的诊断报告。 Windows 不支持此。 默认为 "),e("code",[s._v("false")]),s._v("。")]),s._v(" "),e("p",[s._v("当为 "),e("code",[s._v("true")]),s._v(" 时，"),e("code",[s._v("reportOnUncaughtException")]),s._v(" 触发未捕获异常的诊断报告。 默认为 "),e("code",[s._v("false")]),s._v("。")]),s._v(" "),e("p",[e("code",[s._v("signal")]),s._v(" 指定将用于拦截外部触发器以生成报告的 POSIX 信号标识符 默认为 "),e("code",[s._v("'SIGUSR2'")]),s._v("。")]),s._v(" "),e("p",[e("code",[s._v("filename")]),s._v(" 指定文件系统中输出文件的名称。 "),e("code",[s._v("stdout")]),s._v(" 和 "),e("code",[s._v("stderr")]),s._v(" 附有特殊含义。 使用这些将导致报告被写入相关的标准流。 在使用标准流的情况下，"),e("code",[s._v("directory")]),s._v(" 中的值将被忽略。 不支持网址。 默认为包含时间戳、进程标识、以及序列号的复合文件名。")]),s._v(" "),e("p",[e("code",[s._v("directory")]),s._v(" 指定将写入报告的文件系统目录。 不支持网址。 默认为 Node.js 进程的当前工作目录。")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// 仅触发未捕获异常上的报告。\nprocess.report.reportOnFatalError = false;\nprocess.report.reportOnSignal = false;\nprocess.report.reportOnUncaughtException = true;\n\n// 触发内部错误和外部信号的报告。\nprocess.report.reportOnFatalError = true;\nprocess.report.reportOnSignal = true;\nprocess.report.reportOnUncaughtException = false;\n\n// 将默认信号更改为 'SIGQUIT' 并启用。\nprocess.report.reportOnFatalError = false;\nprocess.report.reportOnUncaughtException = false;\nprocess.report.reportOnSignal = true;\nprocess.report.signal = 'SIGQUIT';\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("模块初始化的配置也可以通过环境变量获得：")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('NODE_OPTIONS="--report-uncaught-exception \\\n  --report-on-fatalerror --report-on-signal \\\n  --report-signal=SIGUSR2  --report-filename=./report.json \\\n  --report-directory=/home/nodeuser"\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("具体的 API 文档可以在 "),e("a",{attrs:{href:"http://nodejs.cn/api-v12/process.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("process API documentation")]),e("OutboundLink")],1),s._v(" 章节下找到。")]),s._v(" "),e("h3",{attrs:{id:"与工作线程的交互"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#与工作线程的交互"}},[s._v("#")]),s._v(" 与工作线程的交互"),e("a",{attrs:{href:"http://nodejs.cn/api-v12/report.html#interaction-with-workers",target:"_blank",rel:"noopener noreferrer"}},[s._v("#"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"http://nodejs.cn/api-v12/report/interaction_with_workers.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("中英对照"),e("OutboundLink")],1)]),s._v(" "),e("p",[e("a",{attrs:{href:"http://nodejs.cn/api-v12/worker_threads.html",target:"_blank",rel:"noopener noreferrer"}},[e("code",[s._v("Worker")]),e("OutboundLink")],1),s._v(" 线程可以像主线程一样创建报告。")]),s._v(" "),e("p",[s._v("报告将包括作为 "),e("code",[s._v("workers")]),s._v(" 部分的一部分的当前线程的子线程的任何工作线程的信息，每个工作线程以标准报告格式生成报告。")]),s._v(" "),e("p",[s._v("生成报告的线程将等待工作线程的报告完成。 但是，由于运行 JavaScript 和事件循环都被中断以生成报告，因此延迟通常很低。")])])}),[],!1,null,null,null);n.default=r.exports}}]);