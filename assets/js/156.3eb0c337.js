(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{622:function(e,r,n){"use strict";n.r(r);var t=n(18),a=Object(t.a)({},(function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"readline-逐行读取-node-js-api-文档"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-逐行读取-node-js-api-文档"}},[e._v("#")]),e._v(" readline 逐行读取 | Node.js API 文档")]),e._v(" "),n("blockquote",[n("h2",{attrs:{id:"excerpt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#excerpt"}},[e._v("#")]),e._v(" Excerpt")]),e._v(" "),n("p",[e._v("中英对照")])]),e._v(" "),n("hr"),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("strong",[e._v("源代码:")]),e._v(" "),n("a",{attrs:{href:"https://github.com/nodejs/node/blob/v12.22.12/lib/readline.js",target:"_blank",rel:"noopener noreferrer"}},[e._v("lib/readline.js"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("code",[e._v("readline")]),e._v(" 模块提供了用于从"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/stream.html#stream_readable_streams",target:"_blank",rel:"noopener noreferrer"}},[e._v("可读"),n("OutboundLink")],1),e._v("流（例如 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/process.html#process_process_stdin",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("process.stdin")]),n("OutboundLink")],1),e._v("）每次一行地读取数据的接口。 可以使用以下方式访问它：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const readline = require('readline');\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br")])]),n("p",[e._v("下面的简单示例阐明了 "),n("code",[e._v("readline")]),e._v(" 模块的基本用法。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const readline = require('readline');\n\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n\nrl.question('What do you think of Node.js? ', (answer) => {\n  // TODO：记录答案到数据库中\n  console.log(`Thank you for your valuable feedback: ${answer}`);\n\n  rl.close();\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br")])]),n("p",[e._v("一旦调用此代码，则 Node.js 应用程序将不会终止，直到 "),n("code",[e._v("readline.Interface")]),e._v(" 关闭，因为接口在 "),n("code",[e._v("input")]),e._v(" 流上等待接收数据。")]),e._v(" "),n("h3",{attrs:{id:"interface-类"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#interface-类"}},[e._v("#")]),e._v(" "),n("code",[e._v("Interface")]),e._v(" 类"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#class-interface",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/class_interface.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.104")]),e._v(" "),n("ul",[n("li",[e._v("继承自: "),n("a",{attrs:{href:"http://nodejs.cn/api/events.html#class-eventemitter",target:"_blank",rel:"noopener noreferrer"}},[n("EventEmitter",[n("OutboundLink")],1)],1)])]),e._v(" "),n("p",[n("code",[e._v("readline.Interface")]),e._v(" 类的实例是使用 "),n("code",[e._v("readline.createInterface()")]),e._v(" 方法构造的。 每个实例都与单个 "),n("code",[e._v("input")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/stream.html#stream_readable_streams",target:"_blank",rel:"noopener noreferrer"}},[e._v("可读"),n("OutboundLink")],1),e._v("流和单个 "),n("code",[e._v("output")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/stream.html#stream_writable_streams",target:"_blank",rel:"noopener noreferrer"}},[e._v("可写"),n("OutboundLink")],1),e._v("流相关联。 "),n("code",[e._v("output")]),e._v(" 流用于打印到达并从 "),n("code",[e._v("input")]),e._v(" 流中读取的用户输入的提示。")]),e._v(" "),n("h4",{attrs:{id:"close-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#close-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'close'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-close",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_close.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("p",[e._v("发生以下情况之一时会触发 "),n("code",[e._v("'close'")]),e._v(" 事件：")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("rl.close()")]),e._v(" 方法被调用，"),n("code",[e._v("readline.Interface")]),e._v(" 实例放弃了对 "),n("code",[e._v("input")]),e._v(" 和 "),n("code",[e._v("output")]),e._v(" 流的控制；")]),e._v(" "),n("li",[n("code",[e._v("input")]),e._v(" 流接收到它的 "),n("code",[e._v("'end'")]),e._v(" 事件；")])]),e._v(" "),n("p",[e._v("调用监听器函数时不传入任何参数。")]),e._v(" "),n("p",[e._v("一旦触发 "),n("code",[e._v("'close'")]),e._v(" 事件，则 "),n("code",[e._v("readline.Interface")]),e._v(" 实例就完成了。")]),e._v(" "),n("h4",{attrs:{id:"line-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#line-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'line'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-line",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_line.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("p",[e._v("每当 "),n("code",[e._v("input")]),e._v(" 流接收到行尾输入（"),n("code",[e._v("\\n")]),e._v("、"),n("code",[e._v("\\r")]),e._v(" 或 "),n("code",[e._v("\\r\\n")]),e._v("）时，则会触发 "),n("code",[e._v("'line'")]),e._v(" 事件。")]),e._v(" "),n("p",[e._v("使用包含单行接收输入的字符串调用监听器函数。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('line', (input) => {\n  console.log(`Received: ${input}`);\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h4",{attrs:{id:"pause-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pause-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'pause'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-pause",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_pause.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.7.5")]),e._v(" "),n("p",[e._v("发生以下情况之一时会触发 "),n("code",[e._v("'pause'")]),e._v(" 事件：")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("input")]),e._v(" 流已暂停。")]),e._v(" "),n("li",[n("code",[e._v("input")]),e._v(" 流没有暂停并接收 "),n("code",[e._v("'SIGCONT'")]),e._v(" 事件。 （参见事件 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_event_sigtstp",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("'SIGTSTP'")]),n("OutboundLink")],1),e._v(" 和 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_event_sigcont",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("'SIGCONT'")]),n("OutboundLink")],1),e._v("。）")])]),e._v(" "),n("p",[e._v("调用监听器函数时不传入任何参数。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('pause', () => {\n  console.log('Readline paused.');\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h4",{attrs:{id:"resume-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#resume-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'resume'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-resume",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_resume.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.7.5")]),e._v(" "),n("p",[e._v("每当 "),n("code",[e._v("input")]),e._v(" 流恢复时，则会触发 "),n("code",[e._v("'resume'")]),e._v(" 事件。")]),e._v(" "),n("p",[e._v("调用监听器函数时不传入任何参数。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('resume', () => {\n  console.log('Readline resumed.');\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h4",{attrs:{id:"sigcont-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sigcont-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'SIGCONT'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-sigcont",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_sigcont.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.7.5")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("input")]),e._v(" 流在 "),n("code",[e._v("SIGTSTP")]),e._v(" 请求之前暂停，则不会触发此事件。")]),e._v(" "),n("p",[e._v("调用监听器函数时不传入任何参数。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('SIGCONT', () => {\n  // `prompt` 会自动恢复流\n  rl.prompt();\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br")])]),n("p",[e._v("Windows 不支持 "),n("code",[e._v("'SIGCONT'")]),e._v(" 事件。")]),e._v(" "),n("h4",{attrs:{id:"sigint-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sigint-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'SIGINT'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-sigint",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_sigint.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.3.0")]),e._v(" "),n("p",[e._v("如果在 "),n("code",[e._v("input")]),e._v(" 流接收到 "),n("code",[e._v("SIGINT")]),e._v(" 时没有注册 "),n("code",[e._v("'SIGINT'")]),e._v(" 事件监听器，则将触发 "),n("code",[e._v("'pause'")]),e._v(" 事件。")]),e._v(" "),n("p",[e._v("调用监听器函数时不传入任何参数。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('SIGINT', () => {\n  rl.question('Are you sure you want to exit? ', (answer) => {\n    if (answer.match(/^y(es)?$/i)) rl.pause();\n  });\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("h4",{attrs:{id:"sigtstp-事件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#sigtstp-事件"}},[e._v("#")]),e._v(" "),n("code",[e._v("'SIGTSTP'")]),e._v(" 事件"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#event-sigtstp",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/event_sigtstp.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.7.5")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("input")]),e._v(" 流接收到 "),n("code",[e._v("SIGTSTP")]),e._v(" 时没有注册 "),n("code",[e._v("'SIGTSTP'")]),e._v(" 事件监听器，则 Node.js 进程将被发送到后台。")]),e._v(" "),n("p",[e._v("当使用 "),n("a",{attrs:{href:"http://url.nodejs.cn/hgYpiL",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("fg(1p)")]),n("OutboundLink")],1),e._v(" 恢复程序时，则将触发 "),n("code",[e._v("'pause'")]),e._v(" 和 "),n("code",[e._v("'SIGCONT'")]),e._v(" 事件。 这些可用于恢复 "),n("code",[e._v("input")]),e._v(" 流。")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("input")]),e._v(" 在进程发送到后台之前暂停，则不会触发 "),n("code",[e._v("'pause'")]),e._v(" 和 "),n("code",[e._v("'SIGCONT'")]),e._v(" 事件。")]),e._v(" "),n("p",[e._v("调用监听器函数时不传入任何参数。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('SIGTSTP', () => {\n  // 这将覆盖 SIGTSTP \n  // 并且阻止程序进入后台。\n  console.log('Caught SIGTSTP.');\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("Windows 不支持 "),n("code",[e._v("'SIGTSTP'")]),e._v(" 事件。")]),e._v(" "),n("h4",{attrs:{id:"rl-close"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-close"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.close()")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlclose",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_close.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("p",[n("code",[e._v("rl.close()")]),e._v(" 方法关闭 "),n("code",[e._v("readline.Interface")]),e._v(" 实例并放弃对 "),n("code",[e._v("input")]),e._v(" 和 "),n("code",[e._v("output")]),e._v(" 流的控制。 当调用时，将触发 "),n("code",[e._v("'close'")]),e._v(" 事件。")]),e._v(" "),n("p",[e._v("调用 "),n("code",[e._v("rl.close()")]),e._v(" 不会立即阻止其他由 "),n("code",[e._v("readline.Interface")]),e._v(" 实例触发的事件（包括 "),n("code",[e._v("'line'")]),e._v("）。")]),e._v(" "),n("h4",{attrs:{id:"rl-pause"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-pause"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.pause()")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlpause",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_pause.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.3.4")]),e._v(" "),n("p",[n("code",[e._v("rl.pause()")]),e._v(" 方法暂停 "),n("code",[e._v("input")]),e._v(" 流，允许它稍后在必要时恢复。")]),e._v(" "),n("p",[e._v("调用 "),n("code",[e._v("rl.pause()")]),e._v(" 不会立即暂停其他由 "),n("code",[e._v("readline.Interface")]),e._v(" 实例触发的事件（包括 "),n("code",[e._v("'line'")]),e._v("）。")]),e._v(" "),n("h4",{attrs:{id:"rl-prompt-preservecursor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-prompt-preservecursor"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.prompt([preserveCursor])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlpromptpreservecursor",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_prompt_preservecursor.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("preserveCursor")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果为 "),n("code",[e._v("true")]),e._v("，则防止光标位置重置为 "),n("code",[e._v("0")]),e._v("。")])]),e._v(" "),n("p",[n("code",[e._v("rl.prompt()")]),e._v(" 方法将配置为 "),n("code",[e._v("prompt")]),e._v(" 的 "),n("code",[e._v("readline.Interface")]),e._v(" 实例写入 "),n("code",[e._v("output")]),e._v(" 中的新行，以便为用户提供用于提供输入的新位置。")]),e._v(" "),n("p",[e._v("当调用时，如果 "),n("code",[e._v("rl.prompt()")]),e._v(" 流已暂停，则 "),n("code",[e._v("rl.prompt()")]),e._v(" 将恢复 "),n("code",[e._v("input")]),e._v(" 流。")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("readline.Interface")]),e._v(" 是在 "),n("code",[e._v("output")]),e._v(" 设置为 "),n("code",[e._v("null")]),e._v(" 或 "),n("code",[e._v("undefined")]),e._v(" 的情况下创建的，则不会写入提示。")]),e._v(" "),n("h4",{attrs:{id:"rl-question-query-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-question-query-callback"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.question(query, callback)")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlquestionquery-callback",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_question_query_callback.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.3.3")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("query")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[n("string",[n("OutboundLink")],1)],1),e._v(" 要写入 "),n("code",[e._v("output")]),e._v(" 的语句或查询，位于提示之前。")]),e._v(" "),n("li",[n("code",[e._v("callback")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[n("Function",[n("OutboundLink")],1)],1),e._v(" 使用用户输入调用的回调函数以响应 "),n("code",[e._v("query")]),e._v("。")])]),e._v(" "),n("p",[n("code",[e._v("rl.question()")]),e._v(" 方法通过将 "),n("code",[e._v("query")]),e._v(" 写入 "),n("code",[e._v("output")]),e._v(" 来显示 "),n("code",[e._v("query")]),e._v("，等待在 "),n("code",[e._v("input")]),e._v(" 上提供用户输入，然后调用 "),n("code",[e._v("callback")]),e._v(" 函数，将提供的输入作为第一个参数传入。")]),e._v(" "),n("p",[e._v("当调用时，如果 "),n("code",[e._v("rl.question()")]),e._v(" 流已暂停，则 "),n("code",[e._v("rl.question()")]),e._v(" 将恢复 "),n("code",[e._v("input")]),e._v(" 流。")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("readline.Interface")]),e._v(" 是在 "),n("code",[e._v("output")]),e._v(" 设置为 "),n("code",[e._v("null")]),e._v(" 或 "),n("code",[e._v("undefined")]),e._v(" 的情况下创建的，则不会写入 "),n("code",[e._v("query")]),e._v("。")]),e._v(" "),n("p",[e._v("用法示例：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.question('What is your favorite food? ', (answer) => {\n  console.log(`Oh, so your favorite food is ${answer}`);\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("传给 "),n("code",[e._v("rl.question()")]),e._v(" 的 "),n("code",[e._v("callback")]),e._v(" 函数不遵循接受 "),n("code",[e._v("Error")]),e._v(" 对象或 "),n("code",[e._v("null")]),e._v(" 作为第一个参数的典型模式。 以提供的答案作为唯一参数调用 "),n("code",[e._v("callback")]),e._v("。")]),e._v(" "),n("h4",{attrs:{id:"rl-resume"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-resume"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.resume()")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlresume",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_resume.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.3.4")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("input")]),e._v(" 流已暂停，则 "),n("code",[e._v("rl.resume()")]),e._v(" 方法会恢复该流。")]),e._v(" "),n("h4",{attrs:{id:"rl-setprompt-prompt"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-setprompt-prompt"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.setPrompt(prompt)")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlsetpromptprompt",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_setprompt_prompt.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("prompt")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[n("string",[n("OutboundLink")],1)],1)])]),e._v(" "),n("p",[n("code",[e._v("rl.setPrompt()")]),e._v(" 方法设置了在调用 "),n("code",[e._v("rl.prompt()")]),e._v(" 时将写入 "),n("code",[e._v("output")]),e._v(" 的提示。")]),e._v(" "),n("h4",{attrs:{id:"rl-write-data-key"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-write-data-key"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.write(data[, key])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlwritedata-key",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_write_data_key.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("data")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[n("string",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("key")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[n("Object",[n("OutboundLink")],1)],1),e._v(" "),n("ul",[n("li",[n("code",[e._v("ctrl")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("meta")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("shift")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("name")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[n("string",[n("OutboundLink")],1)],1),e._v(" 键的名称。")])])])]),e._v(" "),n("p",[n("code",[e._v("rl.write()")]),e._v(" 方法会将 "),n("code",[e._v("data")]),e._v(" 或由 "),n("code",[e._v("key")]),e._v(" 标识的键序列写入 "),n("code",[e._v("output")]),e._v("。 仅当 "),n("code",[e._v("output")]),e._v(" 是 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/tty.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTY"),n("OutboundLink")],1),e._v(" 文本终端时才支持 "),n("code",[e._v("key")]),e._v(" 参数。 有关组合键的列表，请参阅 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_tty_keybindings",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTY 快捷键"),n("OutboundLink")],1),e._v("。")]),e._v(" "),n("p",[e._v("如果指定了 "),n("code",[e._v("key")]),e._v("，则忽略 "),n("code",[e._v("data")]),e._v("。")]),e._v(" "),n("p",[e._v("当调用时，如果 "),n("code",[e._v("rl.write()")]),e._v(" 流已暂停，则 "),n("code",[e._v("rl.write()")]),e._v(" 将恢复 "),n("code",[e._v("input")]),e._v(" 流。")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("readline.Interface")]),e._v(" 是在 "),n("code",[e._v("output")]),e._v(" 设置为 "),n("code",[e._v("null")]),e._v(" 或 "),n("code",[e._v("undefined")]),e._v(" 的情况下创建的，则不会写入 "),n("code",[e._v("data")]),e._v(" 和 "),n("code",[e._v("key")]),e._v("。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.write('Delete this!');\n// \nrl.write(null, { ctrl: true, name: 'u' });\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[n("code",[e._v("rl.write()")]),e._v(" 方法将数据写入 "),n("code",[e._v("readline")]),e._v(" "),n("code",[e._v("Interface")]),e._v(" 的 "),n("code",[e._v("input")]),e._v("，就好像它是由用户提供的一样。")]),e._v(" "),n("h4",{attrs:{id:"rl-symbol-asynciterator"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-symbol-asynciterator"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl[Symbol.asyncIterator]()")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlsymbolasynciterator",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_symbol_asynciterator.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[e._v("返回: "),n("a",{attrs:{href:"http://url.nodejs.cn/HnG4ws",target:"_blank",rel:"noopener noreferrer"}},[n("AsyncIterator",[n("OutboundLink")],1)],1)])]),e._v(" "),n("p",[e._v("创建 "),n("code",[e._v("AsyncIterator")]),e._v(" 对象，该对象遍历输入流中的每一行作为字符串。 此方法允许通过 "),n("code",[e._v("for await...of")]),e._v(" 循环异步迭代 "),n("code",[e._v("readline.Interface")]),e._v(" 对象。")]),e._v(" "),n("p",[e._v("输入流中的错误不会被转发。")]),e._v(" "),n("p",[e._v("如果循环以 "),n("code",[e._v("break")]),e._v("、"),n("code",[e._v("throw")]),e._v(" 或 "),n("code",[e._v("return")]),e._v(" 终止，则将调用 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_rl_close",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("rl.close()")]),n("OutboundLink")],1),e._v("。 换句话说，迭代 "),n("code",[e._v("readline.Interface")]),e._v(" 将始终完全消费输入流。")]),e._v(" "),n("p",[e._v("性能无法与传统的 "),n("code",[e._v("'line'")]),e._v(" 事件 API 相提并论。 对于性能敏感的应用程序，请改用 "),n("code",[e._v("'line'")]),e._v("。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("async function processLineByLine() {\n  const rl = readline.createInterface({\n    // ...\n  });\n\n  for await (const line of rl) {\n    // 逐行读取输入中的每一行\n    // 都将在此处作为 `line` 连续可用。\n  }\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br")])]),n("p",[n("code",[e._v("readline.createInterface()")]),e._v(" 将在调用后开始使用输入流。 在接口创建和异步迭代之间进行异步操作可能会导致丢失行。")]),e._v(" "),n("h4",{attrs:{id:"rl-line"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-line"}},[e._v("#")]),e._v(" rl.line"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlline",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_line.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[n("string",[n("OutboundLink")],1)],1),e._v(" | "),n("a",{attrs:{href:"http://url.nodejs.cn/8ym6ow",target:"_blank",rel:"noopener noreferrer"}},[n("undefined",[n("OutboundLink")],1)],1)])]),e._v(" "),n("p",[e._v("节点正在处理的当前输入数据。")]),e._v(" "),n("p",[e._v("这可用于从 TTY 流中收集输入以检索迄今为止（在 "),n("code",[e._v("line")]),e._v(" 事件触发之前）已处理的当前值。 一旦触发 "),n("code",[e._v("line")]),e._v(" 事件，则此属性将是空字符串。")]),e._v(" "),n("p",[e._v("请注意，如果 "),n("code",[e._v("rl.cursor")]),e._v(" 也不受控制，则在实例运行时修改该值可能会产生意想不到的后果。")]),e._v(" "),n("p",[n("strong",[e._v("如果不使用 TTY 流进行输入，则使用 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_event_line",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("'line'")]),n("OutboundLink")],1),e._v(" 事件。")])]),e._v(" "),n("p",[e._v("一个可能的用例如下：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const values = ['lorem ipsum', 'dolor sit amet'];\nconst rl = readline.createInterface(process.stdin);\nconst showResults = debounce(() => {\n  console.log(\n    '\\n',\n    values.filter((val) => val.startsWith(rl.line)).join(' ')\n  );\n}, 300);\nprocess.stdin.on('keypress', (c, k) => {\n  showResults();\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br")])]),n("h4",{attrs:{id:"rl-cursor"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-cursor"}},[e._v("#")]),e._v(" rl.cursor"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlcursor",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_cursor.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.1.98")]),e._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" | "),n("a",{attrs:{href:"http://url.nodejs.cn/8ym6ow",target:"_blank",rel:"noopener noreferrer"}},[n("undefined",[n("OutboundLink")],1)],1)])]),e._v(" "),n("p",[e._v("相对于 "),n("code",[e._v("rl.line")]),e._v(" 的光标位置。")]),e._v(" "),n("p",[e._v("当从 TTY 流读取输入时，这将跟踪当前光标在输入字符串中的位置。 光标的位置决定了在处理输入时将被修改的输入字符串部分，以及将呈现终端插入符号的列。")]),e._v(" "),n("h4",{attrs:{id:"rl-getcursorpos"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#rl-getcursorpos"}},[e._v("#")]),e._v(" "),n("code",[e._v("rl.getCursorPos()")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#rlgetcursorpos",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/rl_getcursorpos.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v12.16.0")]),e._v(" "),n("ul",[n("li",[e._v("返回: "),n("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[n("Object",[n("OutboundLink")],1)],1),e._v(" "),n("ul",[n("li",[n("code",[e._v("rows")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" 光标当前所在的提示行")]),e._v(" "),n("li",[n("code",[e._v("cols")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" 光标当前所在的屏幕列")])])])]),e._v(" "),n("p",[e._v("返回光标相对于输入提示 + 字符串的实际位置。 长输入（换行）字符串以及多行提示都包含在计算中。")]),e._v(" "),n("h3",{attrs:{id:"readline-clearline-stream-dir-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-clearline-stream-dir-callback"}},[e._v("#")]),e._v(" "),n("code",[e._v("readline.clearLine(stream, dir[, callback])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readlineclearlinestream-dir-callback",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline_clearline_stream_dir_callback.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[n("code",[e._v("stream")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamwritable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Writable>"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("dir")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" "),n("ul",[n("li",[n("code",[e._v("-1")]),e._v(": 从光标向左")]),e._v(" "),n("li",[n("code",[e._v("1")]),e._v(": 从光标向右")]),e._v(" "),n("li",[n("code",[e._v("0")]),e._v(": 整行")])])]),e._v(" "),n("li",[n("code",[e._v("callback")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[n("Function",[n("OutboundLink")],1)],1),e._v(" 操作完成后调用。")]),e._v(" "),n("li",[e._v("返回: "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果 "),n("code",[e._v("stream")]),e._v(" 希望调用代码在继续写入额外的数据之前等待 "),n("code",[e._v("'drain'")]),e._v(" 事件被触发，则为 "),n("code",[e._v("false")]),e._v("；否则为 "),n("code",[e._v("true")]),e._v("。")])]),e._v(" "),n("p",[n("code",[e._v("readline.clearLine()")]),e._v(" 方法在 "),n("code",[e._v("dir")]),e._v(" 标识的指定方向上清除给定 TTY 流的当前行。")]),e._v(" "),n("h3",{attrs:{id:"readline-clearscreendown-stream-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-clearscreendown-stream-callback"}},[e._v("#")]),e._v(" "),n("code",[e._v("readline.clearScreenDown(stream[, callback])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readlineclearscreendownstream-callback",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline_clearscreendown_stream_callback.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[n("code",[e._v("stream")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamwritable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Writable>"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("callback")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[n("Function",[n("OutboundLink")],1)],1),e._v(" 操作完成后调用。")]),e._v(" "),n("li",[e._v("返回: "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果 "),n("code",[e._v("stream")]),e._v(" 希望调用代码在继续写入额外的数据之前等待 "),n("code",[e._v("'drain'")]),e._v(" 事件被触发，则为 "),n("code",[e._v("false")]),e._v("；否则为 "),n("code",[e._v("true")]),e._v("。")])]),e._v(" "),n("p",[n("code",[e._v("readline.clearScreenDown()")]),e._v(" 方法从光标的当前位置向下清除给定的 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/tty.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTY"),n("OutboundLink")],1),e._v(" 流。")]),e._v(" "),n("h3",{attrs:{id:"readline-createinterface-options"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-createinterface-options"}},[e._v("#")]),e._v(" "),n("code",[e._v("readline.createInterface(options)")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readlinecreateinterfaceoptions",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline_createinterface_options.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[n("code",[e._v("options")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[n("Object",[n("OutboundLink")],1)],1),e._v(" "),n("ul",[n("li",[n("code",[e._v("input")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamreadable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Readable>"),n("OutboundLink")],1),e._v(" 要监听的"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/stream.html#stream_readable_streams",target:"_blank",rel:"noopener noreferrer"}},[e._v("可读"),n("OutboundLink")],1),e._v("流。 此选项是必需的。")]),e._v(" "),n("li",[n("code",[e._v("output")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamwritable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Writable>"),n("OutboundLink")],1),e._v(" 要将逐行读取的数据写入的"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/stream.html#stream_writable_streams",target:"_blank",rel:"noopener noreferrer"}},[e._v("可写"),n("OutboundLink")],1),e._v("流。")]),e._v(" "),n("li",[n("code",[e._v("completer")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[n("Function",[n("OutboundLink")],1)],1),e._v(" 可选的用于制表符自动补全的函数。")]),e._v(" "),n("li",[n("code",[e._v("terminal")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果 "),n("code",[e._v("input")]),e._v(" 和 "),n("code",[e._v("output")]),e._v(" 流应该被视为终端，并且写入了 ANSI/VT100 转义码，则为 "),n("code",[e._v("true")]),e._v("。 "),n("strong",[e._v("默认值:")]),e._v(" 在实例化时检查 "),n("code",[e._v("output")]),e._v(" 流上的 "),n("code",[e._v("isTTY")]),e._v("。")]),e._v(" "),n("li",[n("code",[e._v("historySize")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" 保留的最大历史行数。 要禁用历史记录，则将此值设置为 "),n("code",[e._v("0")]),e._v("。 仅当 "),n("code",[e._v("terminal")]),e._v(" 由用户或内部的 "),n("code",[e._v("output")]),e._v(" 检查设置为 "),n("code",[e._v("true")]),e._v(" 时，此选项才有意义，否则历史缓存机制根本不会初始化。 "),n("strong",[e._v("默认值:")]),e._v(" "),n("code",[e._v("30")]),e._v("。")]),e._v(" "),n("li",[n("code",[e._v("prompt")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[n("string",[n("OutboundLink")],1)],1),e._v(" 要使用的提示字符串。 "),n("strong",[e._v("默认值:")]),e._v(" "),n("code",[e._v("'> '")]),e._v("。")]),e._v(" "),n("li",[n("code",[e._v("crlfDelay")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" 如果 "),n("code",[e._v("\\r")]),e._v(" 和 "),n("code",[e._v("\\n")]),e._v(" 之间的延迟超过 "),n("code",[e._v("crlfDelay")]),e._v(" 毫秒，则 "),n("code",[e._v("\\r")]),e._v(" 和 "),n("code",[e._v("\\n")]),e._v(" 都将被视为单独的行尾输入。 "),n("code",[e._v("crlfDelay")]),e._v(" 将被强制为不小于 "),n("code",[e._v("100")]),e._v(" 的数字。 它可以设置为 "),n("code",[e._v("Infinity")]),e._v("，在这种情况下，"),n("code",[e._v("\\r")]),e._v(" 后跟 "),n("code",[e._v("\\n")]),e._v(" 将始终被视为单个换行符（这对于具有 "),n("code",[e._v("\\r\\n")]),e._v(" 行分隔符的"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_example_read_file_stream_line_by_line",target:"_blank",rel:"noopener noreferrer"}},[e._v("文件读取"),n("OutboundLink")],1),e._v("可能是合理的）。 "),n("strong",[e._v("默认值:")]),e._v(" "),n("code",[e._v("100")]),e._v("。")]),e._v(" "),n("li",[n("code",[e._v("removeHistoryDuplicates")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果为 "),n("code",[e._v("true")]),e._v("，则当添加到历史列表的新输入行与旧输入行重复时，这将从列表中删除旧行。 "),n("strong",[e._v("默认值:")]),e._v(" "),n("code",[e._v("false")]),e._v("。")]),e._v(" "),n("li",[n("code",[e._v("escapeCodeTimeout")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1),e._v(" "),n("code",[e._v("readline")]),e._v(" 将等待字符的时长（当以毫秒为单位读取不明确的键序列时，既可以使用目前读取的输入形成完整的键序列，又可以采用额外的输入来完成更长的键序列）。 "),n("strong",[e._v("默认值:")]),e._v(" "),n("code",[e._v("500")]),e._v("。")])])])]),e._v(" "),n("p",[n("code",[e._v("readline.createInterface()")]),e._v(" 方法创建新的 "),n("code",[e._v("readline.Interface")]),e._v(" 实例。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const readline = require('readline');\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br")])]),n("p",[e._v("一旦创建了 "),n("code",[e._v("readline.Interface")]),e._v(" 实例，则最常见的场景就是监听 "),n("code",[e._v("'line'")]),e._v(" 事件：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("rl.on('line', (line) => {\n  console.log(`Received: ${line}`);\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("p",[e._v("如果此实例的 "),n("code",[e._v("terminal")]),e._v(" 是 "),n("code",[e._v("true")]),e._v("，则如果它定义了 "),n("code",[e._v("output.columns")]),e._v(" 属性，并且如果或当列发生变化时（"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/process.html#process_process_stdout",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("process.stdout")]),n("OutboundLink")],1),e._v(" 会当其是终端时自动执行此操作）在 "),n("code",[e._v("output")]),e._v(" 上触发 "),n("code",[e._v("'resize'")]),e._v(" 事件，则 "),n("code",[e._v("output")]),e._v(" 流将获得最佳的兼容性。")]),e._v(" "),n("h4",{attrs:{id:"completer-函数的使用"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#completer-函数的使用"}},[e._v("#")]),e._v(" completer 函数的使用"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#use-of-the-completer-function",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/use_of_the_completer_function.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("code",[e._v("completer")]),e._v(" 函数将用户输入的当前行作为参数，并返回包含 2 个条目的 "),n("code",[e._v("Array")]),e._v("：")]),e._v(" "),n("ul",[n("li",[e._v("使用匹配条目的 "),n("code",[e._v("Array")]),e._v(" 补全。")]),e._v(" "),n("li",[e._v("用于匹配的子字符串。")])]),e._v(" "),n("p",[e._v("例如："),n("code",[e._v("[[substr1, substr2, ...], originalsubstring]")]),e._v("。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function completer(line) {\n  const completions = '.help .error .exit .quit .q'.split(' ');\n  const hits = completions.filter((c) => c.startsWith(line));\n  // 如果没有找到，则显示所有补全\n  return [hits.length ? hits : completions, line];\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br")])]),n("p",[e._v("如果 "),n("code",[e._v("completer")]),e._v(" 函数接受两个参数，则可以异步地调用它：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("function completer(linePartial, callback) {\n  callback(null, [['123'], linePartial]);\n}\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h3",{attrs:{id:"readline-cursorto-stream-x-y-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-cursorto-stream-x-y-callback"}},[e._v("#")]),e._v(" "),n("code",[e._v("readline.cursorTo(stream, x[, y][, callback])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readlinecursortostream-x-y-callback",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline_cursorto_stream_x_y_callback.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[n("code",[e._v("stream")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamwritable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Writable>"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("x")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("y")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("callback")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[n("Function",[n("OutboundLink")],1)],1),e._v(" 操作完成后调用。")]),e._v(" "),n("li",[e._v("返回: "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果 "),n("code",[e._v("stream")]),e._v(" 希望调用代码在继续写入额外的数据之前等待 "),n("code",[e._v("'drain'")]),e._v(" 事件被触发，则为 "),n("code",[e._v("false")]),e._v("；否则为 "),n("code",[e._v("true")]),e._v("。")])]),e._v(" "),n("p",[n("code",[e._v("readline.cursorTo()")]),e._v(" 方法将光标移动到给定的 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/tty.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTY"),n("OutboundLink")],1),e._v(" "),n("code",[e._v("stream")]),e._v(" 中的指定位置。")]),e._v(" "),n("h3",{attrs:{id:"readline-emitkeypressevents-stream-interface"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-emitkeypressevents-stream-interface"}},[e._v("#")]),e._v(" "),n("code",[e._v("readline.emitKeypressEvents(stream[, interface])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readlineemitkeypresseventsstream-interface",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline_emitkeypressevents_stream_interface.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("新增于: v0.7.7")]),e._v(" "),n("ul",[n("li",[n("code",[e._v("stream")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamreadable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Readable>"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("interface")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/readline.html#class-readlineinterface",target:"_blank",rel:"noopener noreferrer"}},[e._v("<readline.Interface>"),n("OutboundLink")],1)])]),e._v(" "),n("p",[n("code",[e._v("readline.emitKeypressEvents()")]),e._v(" 方法使给定的"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/stream.html#stream_readable_streams",target:"_blank",rel:"noopener noreferrer"}},[e._v("可读"),n("OutboundLink")],1),e._v("流开始触发与接收到的输入相对应的 "),n("code",[e._v("'keypress'")]),e._v(" 事件。")]),e._v(" "),n("p",[e._v("可选地，"),n("code",[e._v("interface")]),e._v(" 指定 "),n("code",[e._v("readline.Interface")]),e._v(" 实例，当检测到复制粘贴输入时禁用自动完成。")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("stream")]),e._v(" 是 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/tty.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTY"),n("OutboundLink")],1),e._v("，则它必须处于原始模式。")]),e._v(" "),n("p",[e._v("如果 "),n("code",[e._v("input")]),e._v(" 是终端，则它会被其 "),n("code",[e._v("input")]),e._v(" 上的任何逐行读取实例自动调用。 关闭 "),n("code",[e._v("readline")]),e._v(" 实例不会阻止 "),n("code",[e._v("input")]),e._v(" 触发 "),n("code",[e._v("'keypress'")]),e._v(" 事件。")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("readline.emitKeypressEvents(process.stdin);\nif (process.stdin.isTTY)\n  process.stdin.setRawMode(true);\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br")])]),n("h3",{attrs:{id:"readline-movecursor-stream-dx-dy-callback"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#readline-movecursor-stream-dx-dy-callback"}},[e._v("#")]),e._v(" "),n("code",[e._v("readline.moveCursor(stream, dx, dy[, callback])")]),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readlinemovecursorstream-dx-dy-callback",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/readline_movecursor_stream_dx_dy_callback.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("ul",[n("li",[n("code",[e._v("stream")]),e._v(" "),n("a",{attrs:{href:"http://nodejs.cn/api/stream.html#class-streamwritable",target:"_blank",rel:"noopener noreferrer"}},[e._v("<stream.Writable>"),n("OutboundLink")],1)]),e._v(" "),n("li",[n("code",[e._v("dx")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("dy")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/SXbo1v",target:"_blank",rel:"noopener noreferrer"}},[n("number",[n("OutboundLink")],1)],1)]),e._v(" "),n("li",[n("code",[e._v("callback")]),e._v(" "),n("a",{attrs:{href:"http://url.nodejs.cn/ceTQa6",target:"_blank",rel:"noopener noreferrer"}},[n("Function",[n("OutboundLink")],1)],1),e._v(" 操作完成后调用。")]),e._v(" "),n("li",[e._v("返回: "),n("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[n("boolean",[n("OutboundLink")],1)],1),e._v(" 如果 "),n("code",[e._v("stream")]),e._v(" 希望调用代码在继续写入额外的数据之前等待 "),n("code",[e._v("'drain'")]),e._v(" 事件被触发，则为 "),n("code",[e._v("false")]),e._v("；否则为 "),n("code",[e._v("true")]),e._v("。")])]),e._v(" "),n("p",[n("code",[e._v("readline.moveCursor()")]),e._v(" 方法相对于它在给定的 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/tty.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("TTY"),n("OutboundLink")],1),e._v(" "),n("code",[e._v("stream")]),e._v(" 中的当前位置移动光标。")]),e._v(" "),n("h3",{attrs:{id:"示例-微型-cli"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例-微型-cli"}},[e._v("#")]),e._v(" 示例：微型 CLI"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#example-tiny-cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/example_tiny_cli.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[e._v("下面的例子说明了使用 "),n("code",[e._v("readline.Interface")]),e._v(" 类来实现一个微型的命令行界面：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const readline = require('readline');\nconst rl = readline.createInterface({\n  input: process.stdin,\n  output: process.stdout,\n  prompt: 'OHAI> '\n});\n\nrl.prompt();\n\nrl.on('line', (line) => {\n  switch (line.trim()) {\n    case 'hello':\n      console.log('world!');\n      break;\n    default:\n      console.log(`Say what? I might have heard '${line.trim()}'`);\n      break;\n  }\n  rl.prompt();\n}).on('close', () => {\n  console.log('Have a great day!');\n  process.exit(0);\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br"),n("span",{staticClass:"line-number"},[e._v("23")]),n("br")])]),n("h3",{attrs:{id:"示例-逐行读取文件流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#示例-逐行读取文件流"}},[e._v("#")]),e._v(" 示例：逐行读取文件流"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#example-read-file-stream-line-by-line",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/example_read_file_stream_line_by_line.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("code",[e._v("readline")]),e._v(" 的一个常见用例是每次一行地消费输入文件。 最简单的方式是利用 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/fs.html#fs_class_fs_readstream",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("fs.ReadStream")]),n("OutboundLink")],1),e._v(" API 和 "),n("code",[e._v("for await...of")]),e._v(" 循环：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const fs = require('fs');\nconst readline = require('readline');\n\nasync function processLineByLine() {\n  const fileStream = fs.createReadStream('input.txt');\n\n  const rl = readline.createInterface({\n    input: fileStream,\n    crlfDelay: Infinity\n  });\n  // 注意：使用 crlfDelay 选项\n  // 将 input.txt 中的所有 CR LF ('\\r\\n') 实例识别为单个换行符。\n\n  for await (const line of rl) {\n    // input.txt 中的每一行都将在此处作为 `line` 连续可用。\n    console.log(`Line from file: ${line}`);\n  }\n}\n\nprocessLineByLine();\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br")])]),n("p",[e._v("或者，可以使用 "),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#readline_event_line",target:"_blank",rel:"noopener noreferrer"}},[n("code",[e._v("'line'")]),n("OutboundLink")],1),e._v(" 事件：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const fs = require('fs');\nconst readline = require('readline');\n\nconst rl = readline.createInterface({\n  input: fs.createReadStream('sample.txt'),\n  crlfDelay: Infinity\n});\n\nrl.on('line', (line) => {\n  console.log(`Line from file: ${line}`);\n});\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br")])]),n("p",[e._v("目前，"),n("code",[e._v("for await...of")]),e._v(" 循环可能会慢一点。 如果 "),n("code",[e._v("async")]),e._v(" / "),n("code",[e._v("await")]),e._v(" 流量和速度都必不可少，则可以应用混合方法：")]),e._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[e._v("const { once } = require('events');\nconst { createReadStream } = require('fs');\nconst { createInterface } = require('readline');\n\n(async function processLineByLine() {\n  try {\n    const rl = createInterface({\n      input: createReadStream('big-file.txt'),\n      crlfDelay: Infinity\n    });\n\n    rl.on('line', (line) => {\n      // 处理行。\n    });\n\n    await once(rl, 'close');\n\n    console.log('File processed.');\n  } catch (err) {\n    console.error(err);\n  }\n})();\n")])]),e._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[e._v("1")]),n("br"),n("span",{staticClass:"line-number"},[e._v("2")]),n("br"),n("span",{staticClass:"line-number"},[e._v("3")]),n("br"),n("span",{staticClass:"line-number"},[e._v("4")]),n("br"),n("span",{staticClass:"line-number"},[e._v("5")]),n("br"),n("span",{staticClass:"line-number"},[e._v("6")]),n("br"),n("span",{staticClass:"line-number"},[e._v("7")]),n("br"),n("span",{staticClass:"line-number"},[e._v("8")]),n("br"),n("span",{staticClass:"line-number"},[e._v("9")]),n("br"),n("span",{staticClass:"line-number"},[e._v("10")]),n("br"),n("span",{staticClass:"line-number"},[e._v("11")]),n("br"),n("span",{staticClass:"line-number"},[e._v("12")]),n("br"),n("span",{staticClass:"line-number"},[e._v("13")]),n("br"),n("span",{staticClass:"line-number"},[e._v("14")]),n("br"),n("span",{staticClass:"line-number"},[e._v("15")]),n("br"),n("span",{staticClass:"line-number"},[e._v("16")]),n("br"),n("span",{staticClass:"line-number"},[e._v("17")]),n("br"),n("span",{staticClass:"line-number"},[e._v("18")]),n("br"),n("span",{staticClass:"line-number"},[e._v("19")]),n("br"),n("span",{staticClass:"line-number"},[e._v("20")]),n("br"),n("span",{staticClass:"line-number"},[e._v("21")]),n("br"),n("span",{staticClass:"line-number"},[e._v("22")]),n("br")])]),n("h3",{attrs:{id:"tty-快捷键"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#tty-快捷键"}},[e._v("#")]),e._v(" TTY 快捷键"),n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline.html#tty-keybindings",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),n("OutboundLink")],1)]),e._v(" "),n("p",[n("a",{attrs:{href:"http://nodejs.cn/api-v12/readline/tty_keybindings.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),n("OutboundLink")],1)]),e._v(" "),n("table",[n("thead",[n("tr",[n("th",[e._v("快捷键")]),e._v(" "),n("th",[e._v("描述")]),e._v(" "),n("th",[e._v("注意事项")])])]),e._v(" "),n("tbody",[n("tr",[n("td"),e._v(" "),n("td",[e._v("删除行左")]),e._v(" "),n("td",[e._v("不适用于 Linux、Mac 和 Windows")])]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("删除行右")]),e._v(" "),n("td",[e._v("不适用于 Mac")])]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("触发 "),n("code",[e._v("SIGINT")]),e._v(" 或关闭逐行读取实例")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("删除左边")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("如果当前行为空或 EOF，则向右删除或关闭逐行读取实例")]),e._v(" "),n("td",[e._v("不适用于 Windows")])]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("从当前位置删除到行首")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("从当前位置删除到行尾")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("转到行首")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("转到行尾")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("后退一个字符")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("前进一个字符")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("清屏")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("下一个历史子项")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("上一个历史子项")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("将正在运行的进程移到后台。")]),e._v(" "),n("td",[e._v("不适用于 Windows")])]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("向后删除到单词边界")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("向前删除到单词边界")]),e._v(" "),n("td",[e._v("不适用于 Mac")])]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("左边的单词")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("右边的单词")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("删除右边的单词")]),e._v(" "),n("td")]),e._v(" "),n("tr",[n("td"),e._v(" "),n("td",[e._v("删除左边的单词")]),e._v(" "),n("td",[e._v("不适用于 Mac")])])])])])}),[],!1,null,null,null);r.default=a.exports}}]);