(window.webpackJsonp=window.webpackJsonp||[]).push([[134],{601:function(e,n,s){"use strict";s.r(n);var r=s(18),t=Object(r.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"debugger-调试器-node-js-api-文档"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#debugger-调试器-node-js-api-文档"}},[e._v("#")]),e._v(" debugger 调试器 | Node.js API 文档")]),e._v(" "),s("blockquote",[s("h2",{attrs:{id:"excerpt"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#excerpt"}},[e._v("#")]),e._v(" Excerpt")]),e._v(" "),s("p",[e._v("中英对照")])]),e._v(" "),s("hr"),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/debugger.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ node inspect myscript.js\n< Debugger listening on ws://127.0.0.1:9229/80e7a814-7cd3-49fb-921a-2e02228cd5ba\n< For help, see: https://nodejs.org/en/docs/inspector\n< Debugger attached.\nBreak on start in myscript.js:1\n> 1 (function (exports, require, module, __filename, __dirname) { global.x = 5;\n  2 setTimeout(() => {\n  3   console.log('world');\ndebug>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br")])]),s("p",[e._v("Node.js 调试器客户端不是功能齐全的调试器，但可以进行简单的步骤和检查。")]),e._v(" "),s("p",[e._v("将语句 "),s("code",[e._v("debugger;")]),e._v(" 插入脚本的源代码，则将在代码中的该位置启用断点：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("// myscript.js\nglobal.x = 5;\nsetTimeout(() => {\n  debugger;\n  console.log('world');\n}, 1000);\nconsole.log('hello');\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br")])]),s("p",[e._v("一旦调试器运行，则断点将出现在第 3 行：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ node inspect myscript.js\n< Debugger listening on ws://127.0.0.1:9229/80e7a814-7cd3-49fb-921a-2e02228cd5ba\n< For help, see: https://nodejs.org/en/docs/inspector\n< Debugger attached.\nBreak on start in myscript.js:1\n> 1 (function (exports, require, module, __filename, __dirname) { global.x = 5;\n  2 setTimeout(() => {\n  3   debugger;\ndebug> cont\n< hello\nbreak in myscript.js:3\n  1 (function (exports, require, module, __filename, __dirname) { global.x = 5;\n  2 setTimeout(() => {\n> 3   debugger;\n  4   console.log('world');\n  5 }, 1000);\ndebug> next\nbreak in myscript.js:4\n  2 setTimeout(() => {\n  3   debugger;\n> 4   console.log('world');\n  5 }, 1000);\n  6 console.log('hello');\ndebug> repl\nPress Ctrl + C to leave debug repl\n> x\n5\n> 2 + 2\n4\ndebug> next\n< world\nbreak in myscript.js:5\n  3   debugger;\n  4   console.log('world');\n> 5 }, 1000);\n  6 console.log('hello');\n  7\ndebug> .exit\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br"),s("span",{staticClass:"line-number"},[e._v("38")]),s("br")])]),s("p",[s("code",[e._v("repl")]),e._v(" 命令允许远程评估代码。 "),s("code",[e._v("next")]),e._v(" 命令步进下一行。 键入 "),s("code",[e._v("help")]),e._v(" 以查看可用的其他命令。")]),e._v(" "),s("p",[e._v("在不输入命令的情况下按 "),s("code",[e._v("enter")]),e._v(" 将重复之前的调试器命令。")]),e._v(" "),s("h3",{attrs:{id:"监视器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#监视器"}},[e._v("#")]),e._v(" 监视器"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#watchers",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/watchers.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("可以在调试时监视表达式和变量值。 在每个断点上，监视器列表中的每个表达式都将在当前上下文中进行评估，并且立即显示在断点的源代码列表之前。")]),e._v(" "),s("p",[e._v("要开始监视表达式，则键入 "),s("code",[e._v("watch('my_expression')")]),e._v("。 命令 "),s("code",[e._v("watchers")]),e._v(" 将打印活动的监视器。 要删除监视器，请键入 "),s("code",[e._v("unwatch('my_expression')")]),e._v("。")]),e._v(" "),s("h3",{attrs:{id:"命令参考手册"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#命令参考手册"}},[e._v("#")]),e._v(" 命令参考手册"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#command-reference",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("h4",{attrs:{id:"单步执行"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#单步执行"}},[e._v("#")]),e._v(" 单步执行"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#stepping",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/stepping.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("ul",[s("li",[s("code",[e._v("cont")]),e._v(", "),s("code",[e._v("c")]),e._v(": 继续执行")]),e._v(" "),s("li",[s("code",[e._v("next")]),e._v(", "),s("code",[e._v("n")]),e._v(": 单步执行下一行")]),e._v(" "),s("li",[s("code",[e._v("step")]),e._v(", "),s("code",[e._v("s")]),e._v(": 单步进入")]),e._v(" "),s("li",[s("code",[e._v("out")]),e._v(", "),s("code",[e._v("o")]),e._v(": 单步退出")]),e._v(" "),s("li",[s("code",[e._v("pause")]),e._v(": 暂停正在运行的代码（类似于开发者工具中的暂停按钮）")])]),e._v(" "),s("h4",{attrs:{id:"断点"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#断点"}},[e._v("#")]),e._v(" 断点"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#breakpoints",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/breakpoints.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("ul",[s("li",[s("code",[e._v("setBreakpoint()")]),e._v(", "),s("code",[e._v("sb()")]),e._v(": 在当前行上设置断点")]),e._v(" "),s("li",[s("code",[e._v("setBreakpoint(line)")]),e._v(", "),s("code",[e._v("sb(line)")]),e._v(": 在特定行上设置断点")]),e._v(" "),s("li",[s("code",[e._v("setBreakpoint('fn()')")]),e._v(", "),s("code",[e._v("sb(...)")]),e._v(":")]),e._v(" "),s("li",[s("code",[e._v("setBreakpoint('script.js', 1)")]),e._v(", "),s("code",[e._v("sb(...)")]),e._v(": 在 "),s("code",[e._v("script.js")]),e._v(" 的第一行上设置断点")]),e._v(" "),s("li",[s("code",[e._v("clearBreakpoint('script.js', 1)")]),e._v(", "),s("code",[e._v("cb(...)")]),e._v(": 清除 "),s("code",[e._v("script.js")]),e._v(" 中第 1 行上的断点")])]),e._v(" "),s("p",[e._v("还可以在尚未加载的文件（模块）中设置断点：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ node inspect main.js\n< Debugger listening on ws://127.0.0.1:9229/4e3db158-9791-4274-8909-914f7facf3bd\n< For help, see: https://nodejs.org/en/docs/inspector\n< Debugger attached.\nBreak on start in main.js:1\n> 1 (function (exports, require, module, __filename, __dirname) { const mod = require('./mod.js');\n  2 mod.hello();\n  3 mod.hello();\ndebug> setBreakpoint('mod.js', 22)\nWarning: script 'mod.js' was not loaded yet.\ndebug> c\nbreak in mod.js:22\n 20 // USE OR OTHER DEALINGS IN THE SOFTWARE.\n 21\n>22 exports.hello = function() {\n 23   return 'hello from module';\n 24 };\ndebug>\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br")])]),s("h4",{attrs:{id:"信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#信息"}},[e._v("#")]),e._v(" 信息"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#information",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/information.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("ul",[s("li",[s("code",[e._v("backtrace")]),e._v(", "),s("code",[e._v("bt")]),e._v(": 打印当前执行帧的回溯")]),e._v(" "),s("li",[s("code",[e._v("list(5)")]),e._v(": 列出脚本源代码的 5 行上下文（前后各 5 行）")]),e._v(" "),s("li",[s("code",[e._v("watch(expr)")]),e._v(": 将表达式添加到监视列表")]),e._v(" "),s("li",[s("code",[e._v("unwatch(expr)")]),e._v(": 从监视列表中删除表达式")]),e._v(" "),s("li",[s("code",[e._v("watchers")]),e._v(": 列出所有监视器及其值（在每个断点上自动列出）")]),e._v(" "),s("li",[s("code",[e._v("repl")]),e._v(": 打开调试器的交互式解释器，以在调试脚本的上下文中进行评估")]),e._v(" "),s("li",[s("code",[e._v("exec expr")]),e._v(": 在调试脚本的上下文中执行表达式")])]),e._v(" "),s("h4",{attrs:{id:"执行的控制"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#执行的控制"}},[e._v("#")]),e._v(" 执行的控制"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#execution-control",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/execution_control.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("ul",[s("li",[s("code",[e._v("run")]),e._v(": 运行脚本（在调试器启动时自动运行）")]),e._v(" "),s("li",[s("code",[e._v("restart")]),e._v(": 重启脚本")]),e._v(" "),s("li",[s("code",[e._v("kill")]),e._v(": 杀死脚本")])]),e._v(" "),s("h4",{attrs:{id:"杂项"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#杂项"}},[e._v("#")]),e._v(" 杂项"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#various",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/various.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("ul",[s("li",[s("code",[e._v("scripts")]),e._v(": 列出所有加载的脚本")]),e._v(" "),s("li",[s("code",[e._v("version")]),e._v(": 显示 V8 的版本")])]),e._v(" "),s("h3",{attrs:{id:"高级用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#高级用法"}},[e._v("#")]),e._v(" 高级用法"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#advanced-usage",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("h4",{attrs:{id:"node-js-的-v8-检查器集成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#node-js-的-v8-检查器集成"}},[e._v("#")]),e._v(" Node.js 的 V8 检查器集成"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger.html#v8-inspector-integration-for-nodejs",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("a",{attrs:{href:"http://nodejs.cn/api-v12/debugger/v8_inspector_integration_for_node_js.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("V8 检查器集成允许将 Chrome 开发者工具绑定到 Node.js 实例以进行调试和分析。 它使用 "),s("a",{attrs:{href:"http://url.nodejs.cn/YpFEVu",target:"_blank",rel:"noopener noreferrer"}},[e._v("Chrome 开发者工具协议"),s("OutboundLink")],1),e._v("。")]),e._v(" "),s("p",[e._v("V8 检查器可以通过在启动 Node.js 应用程序时传入 "),s("code",[e._v("--inspect")]),e._v(" 标志来启用。 也可以使用该标志提供自定义的端口，例如 "),s("code",[e._v("--inspect=9222")]),e._v(" 将接受端口 9222 上的开发者工具连接。")]),e._v(" "),s("p",[e._v("要中断应用程序代码的第一行，则传入 "),s("code",[e._v("--inspect-brk")]),e._v(" 标志而不是 "),s("code",[e._v("--inspect")]),e._v("。")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ node --inspect index.js\nDebugger listening on ws://127.0.0.1:9229/dc9010dd-f8b8-4ac5-a510-c1a114ec7d29\nFor help, see: https://nodejs.org/en/docs/inspector\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("（在上面的示例中，网址末尾的 UUID dc9010dd-f8b8-4ac5-a510-c1a114ec7d29 是动态生成的，它在不同的调试会话中有所不同。）")]),e._v(" "),s("p",[e._v("如果 Chrome 浏览器版本低于 66.0.3345.0，则在上述网址中使用 "),s("code",[e._v("inspector.html")]),e._v(" 而不是 "),s("code",[e._v("js_app.html")]),e._v("。")]),e._v(" "),s("p",[e._v("Chrome 开发者工具尚不支持调试"),s("a",{attrs:{href:"http://nodejs.cn/api-v12/worker_threads.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("工作线程"),s("OutboundLink")],1),e._v("。 "),s("a",{attrs:{href:"http://url.nodejs.cn/iBCQ2L",target:"_blank",rel:"noopener noreferrer"}},[e._v("ndb"),s("OutboundLink")],1),e._v(" 可用于调试它们。")])])}),[],!1,null,null,null);n.default=t.exports}}]);