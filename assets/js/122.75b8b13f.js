(window.webpackJsonp=window.webpackJsonp||[]).push([[122],{642:function(e,n,r){"use strict";r.r(n);var s=r(18),a=Object(s.a)({},(function(){var e=this,n=e.$createElement,r=e._self._c||n;return r("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[r("h1",{attrs:{id:"commonjs-模块-node-js-api-文档"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#commonjs-模块-node-js-api-文档"}},[e._v("#")]),e._v(" CommonJS 模块 | Node.js API 文档")]),e._v(" "),r("blockquote",[r("h2",{attrs:{id:"excerpt"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#excerpt"}},[e._v("#")]),e._v(" Excerpt")]),e._v(" "),r("p",[e._v("中英对照")])]),e._v(" "),r("hr"),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/modules_commonjs_modules.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("在 Node.js 模块系统中，每个文件都被视为独立的模块。 例如，假设一个名为 "),r("code",[e._v("foo.js")]),e._v(" 的文件：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const circle = require('./circle.js');\nconsole.log(`The area of a circle of radius 4 is ${circle.area(4)}`);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("在第一行，"),r("code",[e._v("foo.js")]),e._v(" 加载了与 "),r("code",[e._v("foo.js")]),e._v(" 位于同一目录中的模块 "),r("code",[e._v("circle.js")]),e._v("。")]),e._v(" "),r("p",[e._v("以下是 "),r("code",[e._v("circle.js")]),e._v(" 的内容：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const { PI } = Math;\n\nexports.area = (r) => PI * r ** 2;\n\nexports.circumference = (r) => 2 * PI * r;\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br")])]),r("p",[e._v("模块 "),r("code",[e._v("circle.js")]),e._v(" 已导出函数 "),r("code",[e._v("area()")]),e._v(" 和 "),r("code",[e._v("circumference()")]),e._v("。 通过在特殊的 "),r("code",[e._v("exports")]),e._v(" 对象上指定额外的属性，将函数和对象添加到模块的根部。")]),e._v(" "),r("p",[e._v("模块的本地变量将是私有的，因为模块被 Node.js 封装在函数中（参见"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_the_module_wrapper",target:"_blank",rel:"noopener noreferrer"}},[e._v("模块封装器"),r("OutboundLink")],1),e._v("）。 在此示例中，变量 "),r("code",[e._v("PI")]),e._v(" 是 "),r("code",[e._v("circle.js")]),e._v(" 私有的。")]),e._v(" "),r("p",[e._v("可以为 "),r("code",[e._v("module.exports")]),e._v(" 属性分配新的值（例如函数或对象）。")]),e._v(" "),r("p",[e._v("下面，"),r("code",[e._v("bar.js")]),e._v(" 使用了导出 Square 类的 "),r("code",[e._v("square")]),e._v(" 模块：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const Square = require('./square.js');\nconst mySquare = new Square(2);\nconsole.log(`The area of mySquare is ${mySquare.area()}`);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br")])]),r("p",[r("code",[e._v("square")]),e._v(" 模块在 "),r("code",[e._v("square.js")]),e._v(" 中定义：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("// 赋值给 exports 不会修改模块，必须使用 module.exports\nmodule.exports = class Square {\n  constructor(width) {\n    this.width = width;\n  }\n\n  area() {\n    return this.width ** 2;\n  }\n};\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br")])]),r("p",[e._v("模块系统在 "),r("code",[e._v("require('module')")]),e._v(" 模块中实现。")]),e._v(" "),r("h3",{attrs:{id:"访问主模块"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#访问主模块"}},[e._v("#")]),e._v(" 访问主模块"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#accessing-the-main-module",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/accessing_the_main_module.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("当文件直接从 Node.js 运行时，则 "),r("code",[e._v("require.main")]),e._v(" 被设置为其 "),r("code",[e._v("module")]),e._v("。 这意味着可以通过测试 "),r("code",[e._v("require.main === module")]),e._v(" 来确定文件是否被直接运行。")]),e._v(" "),r("p",[e._v("对于文件 "),r("code",[e._v("foo.js")]),e._v("，如果通过 "),r("code",[e._v("node foo.js")]),e._v(" 运行，则为 "),r("code",[e._v("true")]),e._v("，如果通过 "),r("code",[e._v("require('./foo')")]),e._v(" 运行，则为 "),r("code",[e._v("false")]),e._v("。")]),e._v(" "),r("p",[e._v("因为 "),r("code",[e._v("module")]),e._v(" 提供了 "),r("code",[e._v("filename")]),e._v(" 属性（通常相当于 "),r("code",[e._v("__filename")]),e._v("），通过查看 "),r("code",[e._v("require.main.filename")]),e._v(" 就可以得到当前应用的入口点。")]),e._v(" "),r("h3",{attrs:{id:"addenda-package-manager-tips"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#addenda-package-manager-tips"}},[e._v("#")]),e._v(" Addenda: Package manager tips"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#addenda-package-manager-tips",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/addenda_package_manager_tips.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("Node.js "),r("code",[e._v("require()")]),e._v(" 函数的语义被设计为足够通用以支持合理的目录结构。 诸如 "),r("code",[e._v("dpkg")]),e._v("、"),r("code",[e._v("rpm")]),e._v(" 和 "),r("code",[e._v("npm")]),e._v(" 之类的包管理器程序有望发现无需修改即可从 Node.js 模块构建本机包。")]),e._v(" "),r("p",[e._v("下面给出了一个可行的建议目录结构：")]),e._v(" "),r("p",[e._v("假设想让位于 "),r("code",[e._v("/usr/lib/node/<some-package>/<some-version>")]),e._v(" 的文件夹保存特定版本包的内容。")]),e._v(" "),r("p",[e._v("包可以相互依赖。 为了安装包 "),r("code",[e._v("foo")]),e._v("，可能需要安装包 "),r("code",[e._v("bar")]),e._v(" 的特定版本。 "),r("code",[e._v("bar")]),e._v(" 包本身可能存在依赖关系，在某些情况下，这些甚至可能发生冲突或形成循环依赖关系。")]),e._v(" "),r("p",[e._v("因为 Node.js 查找它加载的任何模块的 "),r("code",[e._v("realpath")]),e._v("（即，它解析符号链接）然后"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_loading_from_node_modules_folders",target:"_blank",rel:"noopener noreferrer"}},[e._v("在 "),r("code",[e._v("node_modules")]),e._v(" 文件夹中查找它们的依赖项"),r("OutboundLink")],1),e._v("，所以这种情况可以通过以下架构解决：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("/usr/lib/node/foo/1.2.3/")]),e._v(": "),r("code",[e._v("foo")]),e._v(" 包的内容，版本 1.2.3。")]),e._v(" "),r("li",[r("code",[e._v("/usr/lib/node/bar/4.3.2/")]),e._v(": "),r("code",[e._v("foo")]),e._v(" 依赖的 "),r("code",[e._v("bar")]),e._v(" 包的内容。")]),e._v(" "),r("li",[r("code",[e._v("/usr/lib/node/foo/1.2.3/node_modules/bar")]),e._v(": "),r("code",[e._v("/usr/lib/node/bar/4.3.2/")]),e._v(" 的符号链接。")]),e._v(" "),r("li",[r("code",[e._v("/usr/lib/node/bar/4.3.2/node_modules/*")]),e._v(": "),r("code",[e._v("bar")]),e._v(" 依赖的包的符号链接。")])]),e._v(" "),r("p",[e._v("因此，即使遇到循环，或者如果存在依赖冲突，每个模块都将能够获得它可以使用的依赖版本。")]),e._v(" "),r("p",[e._v("当 "),r("code",[e._v("foo")]),e._v(" 包中的代码执行 "),r("code",[e._v("require('bar')")]),e._v(" 时，它将获得符号链接到 "),r("code",[e._v("/usr/lib/node/foo/1.2.3/node_modules/bar")]),e._v(" 的版本。 然后，当 "),r("code",[e._v("bar")]),e._v(" 包中的代码调用 "),r("code",[e._v("require('quux')")]),e._v(" 时，它将获得符号链接到 "),r("code",[e._v("/usr/lib/node/bar/4.3.2/node_modules/quux")]),e._v(" 的版本。")]),e._v(" "),r("p",[e._v("此外，为了使模块查找过程更加优化，与其将包直接放在 "),r("code",[e._v("/usr/lib/node")]),e._v(" 中，还可以将它们放在 "),r("code",[e._v("/usr/lib/node_modules/<name>/<version>")]),e._v(" 中。 这样 Node.js 就不会费心寻找 "),r("code",[e._v("/usr/node_modules")]),e._v(" 或 "),r("code",[e._v("/node_modules")]),e._v(" 中缺失的依赖项了。")]),e._v(" "),r("p",[e._v("为了使模块可用于 Node.js 交互式解释器，将 "),r("code",[e._v("/usr/lib/node_modules")]),e._v(" 文件夹添加到 "),r("code",[e._v("$NODE_PATH")]),e._v(" 环境变量可能会很有用。 由于使用 "),r("code",[e._v("node_modules")]),e._v(" 文件夹的模块查找都是相对的，并且基于调用 "),r("code",[e._v("require()")]),e._v(" 的文件的真实路径，因此包本身可以位于任何位置。")]),e._v(" "),r("h3",{attrs:{id:"addenda-the-mjs-extension"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#addenda-the-mjs-extension"}},[e._v("#")]),e._v(" Addenda: The "),r("code",[e._v(".mjs")]),e._v(" extension"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#addenda-the-mjs-extension",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/addenda_the_mjs_extension.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("无法使用 "),r("code",[e._v("require()")]),e._v(" 扩展名为 "),r("code",[e._v(".mjs")]),e._v(" 的文件。 尝试这样做会抛出"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/errors.html#errors_err_require_esm",target:"_blank",rel:"noopener noreferrer"}},[e._v("错误"),r("OutboundLink")],1),e._v("。 "),r("code",[e._v(".mjs")]),e._v(" 扩展名是为无法通过 "),r("code",[e._v("require()")]),e._v(" 加载的 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/esm.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ECMAScript 模块"),r("OutboundLink")],1),e._v("保留的。 有关更多详细信息，请参阅 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/esm.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("ECMAScript 模块"),r("OutboundLink")],1),e._v("。")]),e._v(" "),r("h3",{attrs:{id:"总结"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#all-together",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/all_together.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("要获取调用 "),r("code",[e._v("require()")]),e._v(" 时将加载的确切文件名，则使用 "),r("code",[e._v("require.resolve()")]),e._v(" 函数。")]),e._v(" "),r("p",[e._v("综上所述，这里是 "),r("code",[e._v("require()")]),e._v(" 的伪代码高级算法：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("require(X) from module at path Y\n1. \n   \n   \n2. \n   \n3. \n   \n   \n   \n4. \n   \n5. \n6. \n7. \n\nLOAD_AS_FILE(X)\n1. \n   \n2. \n   \n3. \n   \n4. \n   \n\nLOAD_INDEX(X)\n1. \n   \n2. \n   \n3. \n   \n\nLOAD_AS_DIRECTORY(X)\n1. \n   \n   \n   \n   \n   \n   \n   \n2. LOAD_INDEX(X)\n\nLOAD_NODE_MODULES(X, START)\n1. \n2. \n   \n   \n   \n\nNODE_MODULES_PATHS(START)\n1. \n2. \n3. \n4. \n   \n   \n   \n   \n   \n5. \n\nLOAD_PACKAGE_IMPORTS(X, DIR)\n1. \n2. \n3. \n4. \n5. \n\nLOAD_PACKAGE_EXPORTS(X, DIR)\n1. \n2. \n3. \n4. \n5. \n6. RESOLVE_ESM_MATCH(MATCH)\n\nLOAD_PACKAGE_SELF(X, DIR)\n1. \n2. \n3. \n4. \n5. \n6. RESOLVE_ESM_MATCH(MATCH)\n\nRESOLVE_ESM_MATCH(MATCH)\n1. \n2. \n3. \n   \n   \n4. \n   \n   \n5. \n\n\n## Caching\n\n\n\x3c!--type=misc--\x3e\n\n模块在第一次加载后被缓存。\n这意味着（类似其他缓存）每次调用 `require('foo')` 都会返回完全相同的对象（如果解析为相同的文件）。\n\n如果 `require.cache` 没有被修改，则多次调用 `require('foo')` 不会导致模块代码被多次执行。\n这是重要的特征。\n有了它，可以返回“部分完成”的对象，从而允许加载传递依赖项，即使它们会导致循环。\n\n要让模块多次执行代码，则导出函数，然后调用该函数。\n\n\n### Module caching caveats\n\n\n\x3c!--type=misc--\x3e\n\n模块根据其解析的文件名进行缓存。\n由于模块可能会根据调用模块的位置（从 `node_modules` 文件夹加载）解析为不同的文件名，因此如果 `require('foo')` 解析为不同的文件，则不能保证 `require('foo')` 将始终返回完全相同的对象。\n\n此外，在不区分大小写的文件系统或操作系统上，不同的解析文件名可以指向同一个文件，但缓存仍会将它们视为不同的模块，并将多次重新加载文件。\n例如，`require('./foo')` 和 `require('./FOO')` 返回两个不同的对象，而不管 `./foo` 和 `./FOO` 是否是同一个文件。\n\n\n## Core modules\n\n\n\x3c!--type=misc--\x3e\n\nNode.js 有些模块编译成二进制文件。\n这些模块在本文档的其他地方有更详细的描述。\n\n核心模块在 Node.js 源代码中定义，位于 `lib/` 文件夹中。\n\n如果将核心模块的标识符传给 `require()`，则始终优先加载核心模块。\n例如，`require('http')` 将始终返回内置的 HTTP 模块，即使存在该名称的文件。\n\n\n## Cycles\n\n\n\x3c!--type=misc--\x3e\n\n当有循环 `require()` 调用时，模块在返回时可能尚未完成执行。\n\n考虑这种情况：\n\n`a.js`:\n\n```js\nconsole.log('a starting');\nexports.done = false;\nconst b = require('./b.js');\nconsole.log('in a, b.done = %j', b.done);\nexports.done = true;\nconsole.log('a done');\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br"),r("span",{staticClass:"line-number"},[e._v("14")]),r("br"),r("span",{staticClass:"line-number"},[e._v("15")]),r("br"),r("span",{staticClass:"line-number"},[e._v("16")]),r("br"),r("span",{staticClass:"line-number"},[e._v("17")]),r("br"),r("span",{staticClass:"line-number"},[e._v("18")]),r("br"),r("span",{staticClass:"line-number"},[e._v("19")]),r("br"),r("span",{staticClass:"line-number"},[e._v("20")]),r("br"),r("span",{staticClass:"line-number"},[e._v("21")]),r("br"),r("span",{staticClass:"line-number"},[e._v("22")]),r("br"),r("span",{staticClass:"line-number"},[e._v("23")]),r("br"),r("span",{staticClass:"line-number"},[e._v("24")]),r("br"),r("span",{staticClass:"line-number"},[e._v("25")]),r("br"),r("span",{staticClass:"line-number"},[e._v("26")]),r("br"),r("span",{staticClass:"line-number"},[e._v("27")]),r("br"),r("span",{staticClass:"line-number"},[e._v("28")]),r("br"),r("span",{staticClass:"line-number"},[e._v("29")]),r("br"),r("span",{staticClass:"line-number"},[e._v("30")]),r("br"),r("span",{staticClass:"line-number"},[e._v("31")]),r("br"),r("span",{staticClass:"line-number"},[e._v("32")]),r("br"),r("span",{staticClass:"line-number"},[e._v("33")]),r("br"),r("span",{staticClass:"line-number"},[e._v("34")]),r("br"),r("span",{staticClass:"line-number"},[e._v("35")]),r("br"),r("span",{staticClass:"line-number"},[e._v("36")]),r("br"),r("span",{staticClass:"line-number"},[e._v("37")]),r("br"),r("span",{staticClass:"line-number"},[e._v("38")]),r("br"),r("span",{staticClass:"line-number"},[e._v("39")]),r("br"),r("span",{staticClass:"line-number"},[e._v("40")]),r("br"),r("span",{staticClass:"line-number"},[e._v("41")]),r("br"),r("span",{staticClass:"line-number"},[e._v("42")]),r("br"),r("span",{staticClass:"line-number"},[e._v("43")]),r("br"),r("span",{staticClass:"line-number"},[e._v("44")]),r("br"),r("span",{staticClass:"line-number"},[e._v("45")]),r("br"),r("span",{staticClass:"line-number"},[e._v("46")]),r("br"),r("span",{staticClass:"line-number"},[e._v("47")]),r("br"),r("span",{staticClass:"line-number"},[e._v("48")]),r("br"),r("span",{staticClass:"line-number"},[e._v("49")]),r("br"),r("span",{staticClass:"line-number"},[e._v("50")]),r("br"),r("span",{staticClass:"line-number"},[e._v("51")]),r("br"),r("span",{staticClass:"line-number"},[e._v("52")]),r("br"),r("span",{staticClass:"line-number"},[e._v("53")]),r("br"),r("span",{staticClass:"line-number"},[e._v("54")]),r("br"),r("span",{staticClass:"line-number"},[e._v("55")]),r("br"),r("span",{staticClass:"line-number"},[e._v("56")]),r("br"),r("span",{staticClass:"line-number"},[e._v("57")]),r("br"),r("span",{staticClass:"line-number"},[e._v("58")]),r("br"),r("span",{staticClass:"line-number"},[e._v("59")]),r("br"),r("span",{staticClass:"line-number"},[e._v("60")]),r("br"),r("span",{staticClass:"line-number"},[e._v("61")]),r("br"),r("span",{staticClass:"line-number"},[e._v("62")]),r("br"),r("span",{staticClass:"line-number"},[e._v("63")]),r("br"),r("span",{staticClass:"line-number"},[e._v("64")]),r("br"),r("span",{staticClass:"line-number"},[e._v("65")]),r("br"),r("span",{staticClass:"line-number"},[e._v("66")]),r("br"),r("span",{staticClass:"line-number"},[e._v("67")]),r("br"),r("span",{staticClass:"line-number"},[e._v("68")]),r("br"),r("span",{staticClass:"line-number"},[e._v("69")]),r("br"),r("span",{staticClass:"line-number"},[e._v("70")]),r("br"),r("span",{staticClass:"line-number"},[e._v("71")]),r("br"),r("span",{staticClass:"line-number"},[e._v("72")]),r("br"),r("span",{staticClass:"line-number"},[e._v("73")]),r("br"),r("span",{staticClass:"line-number"},[e._v("74")]),r("br"),r("span",{staticClass:"line-number"},[e._v("75")]),r("br"),r("span",{staticClass:"line-number"},[e._v("76")]),r("br"),r("span",{staticClass:"line-number"},[e._v("77")]),r("br"),r("span",{staticClass:"line-number"},[e._v("78")]),r("br"),r("span",{staticClass:"line-number"},[e._v("79")]),r("br"),r("span",{staticClass:"line-number"},[e._v("80")]),r("br"),r("span",{staticClass:"line-number"},[e._v("81")]),r("br"),r("span",{staticClass:"line-number"},[e._v("82")]),r("br"),r("span",{staticClass:"line-number"},[e._v("83")]),r("br"),r("span",{staticClass:"line-number"},[e._v("84")]),r("br"),r("span",{staticClass:"line-number"},[e._v("85")]),r("br"),r("span",{staticClass:"line-number"},[e._v("86")]),r("br"),r("span",{staticClass:"line-number"},[e._v("87")]),r("br"),r("span",{staticClass:"line-number"},[e._v("88")]),r("br"),r("span",{staticClass:"line-number"},[e._v("89")]),r("br"),r("span",{staticClass:"line-number"},[e._v("90")]),r("br"),r("span",{staticClass:"line-number"},[e._v("91")]),r("br"),r("span",{staticClass:"line-number"},[e._v("92")]),r("br"),r("span",{staticClass:"line-number"},[e._v("93")]),r("br"),r("span",{staticClass:"line-number"},[e._v("94")]),r("br"),r("span",{staticClass:"line-number"},[e._v("95")]),r("br"),r("span",{staticClass:"line-number"},[e._v("96")]),r("br"),r("span",{staticClass:"line-number"},[e._v("97")]),r("br"),r("span",{staticClass:"line-number"},[e._v("98")]),r("br"),r("span",{staticClass:"line-number"},[e._v("99")]),r("br"),r("span",{staticClass:"line-number"},[e._v("100")]),r("br"),r("span",{staticClass:"line-number"},[e._v("101")]),r("br"),r("span",{staticClass:"line-number"},[e._v("102")]),r("br"),r("span",{staticClass:"line-number"},[e._v("103")]),r("br"),r("span",{staticClass:"line-number"},[e._v("104")]),r("br"),r("span",{staticClass:"line-number"},[e._v("105")]),r("br"),r("span",{staticClass:"line-number"},[e._v("106")]),r("br"),r("span",{staticClass:"line-number"},[e._v("107")]),r("br"),r("span",{staticClass:"line-number"},[e._v("108")]),r("br"),r("span",{staticClass:"line-number"},[e._v("109")]),r("br"),r("span",{staticClass:"line-number"},[e._v("110")]),r("br"),r("span",{staticClass:"line-number"},[e._v("111")]),r("br"),r("span",{staticClass:"line-number"},[e._v("112")]),r("br"),r("span",{staticClass:"line-number"},[e._v("113")]),r("br"),r("span",{staticClass:"line-number"},[e._v("114")]),r("br"),r("span",{staticClass:"line-number"},[e._v("115")]),r("br"),r("span",{staticClass:"line-number"},[e._v("116")]),r("br"),r("span",{staticClass:"line-number"},[e._v("117")]),r("br"),r("span",{staticClass:"line-number"},[e._v("118")]),r("br"),r("span",{staticClass:"line-number"},[e._v("119")]),r("br"),r("span",{staticClass:"line-number"},[e._v("120")]),r("br"),r("span",{staticClass:"line-number"},[e._v("121")]),r("br"),r("span",{staticClass:"line-number"},[e._v("122")]),r("br"),r("span",{staticClass:"line-number"},[e._v("123")]),r("br"),r("span",{staticClass:"line-number"},[e._v("124")]),r("br"),r("span",{staticClass:"line-number"},[e._v("125")]),r("br"),r("span",{staticClass:"line-number"},[e._v("126")]),r("br"),r("span",{staticClass:"line-number"},[e._v("127")]),r("br"),r("span",{staticClass:"line-number"},[e._v("128")]),r("br"),r("span",{staticClass:"line-number"},[e._v("129")]),r("br"),r("span",{staticClass:"line-number"},[e._v("130")]),r("br"),r("span",{staticClass:"line-number"},[e._v("131")]),r("br"),r("span",{staticClass:"line-number"},[e._v("132")]),r("br"),r("span",{staticClass:"line-number"},[e._v("133")]),r("br"),r("span",{staticClass:"line-number"},[e._v("134")]),r("br"),r("span",{staticClass:"line-number"},[e._v("135")]),r("br"),r("span",{staticClass:"line-number"},[e._v("136")]),r("br"),r("span",{staticClass:"line-number"},[e._v("137")]),r("br"),r("span",{staticClass:"line-number"},[e._v("138")]),r("br"),r("span",{staticClass:"line-number"},[e._v("139")]),r("br"),r("span",{staticClass:"line-number"},[e._v("140")]),r("br"),r("span",{staticClass:"line-number"},[e._v("141")]),r("br"),r("span",{staticClass:"line-number"},[e._v("142")]),r("br"),r("span",{staticClass:"line-number"},[e._v("143")]),r("br"),r("span",{staticClass:"line-number"},[e._v("144")]),r("br"),r("span",{staticClass:"line-number"},[e._v("145")]),r("br"),r("span",{staticClass:"line-number"},[e._v("146")]),r("br"),r("span",{staticClass:"line-number"},[e._v("147")]),r("br"),r("span",{staticClass:"line-number"},[e._v("148")]),r("br"),r("span",{staticClass:"line-number"},[e._v("149")]),r("br"),r("span",{staticClass:"line-number"},[e._v("150")]),r("br"),r("span",{staticClass:"line-number"},[e._v("151")]),r("br"),r("span",{staticClass:"line-number"},[e._v("152")]),r("br"),r("span",{staticClass:"line-number"},[e._v("153")]),r("br"),r("span",{staticClass:"line-number"},[e._v("154")]),r("br"),r("span",{staticClass:"line-number"},[e._v("155")]),r("br"),r("span",{staticClass:"line-number"},[e._v("156")]),r("br"),r("span",{staticClass:"line-number"},[e._v("157")]),r("br"),r("span",{staticClass:"line-number"},[e._v("158")]),r("br")])]),r("p",[r("code",[e._v("b.js")]),e._v(":")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("console.log('b starting');\nexports.done = false;\nconst a = require('./a.js');\nconsole.log('in b, a.done = %j', a.done);\nexports.done = true;\nconsole.log('b done');\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br")])]),r("p",[r("code",[e._v("main.js")]),e._v(":")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("console.log('main starting');\nconst a = require('./a.js');\nconst b = require('./b.js');\nconsole.log('in main, a.done = %j, b.done = %j', a.done, b.done);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("p",[e._v("当 "),r("code",[e._v("main.js")]),e._v(" 加载 "),r("code",[e._v("a.js")]),e._v(" 时，"),r("code",[e._v("a.js")]),e._v(" 依次加载 "),r("code",[e._v("b.js")]),e._v("。 此时，"),r("code",[e._v("b.js")]),e._v(" 尝试加载 "),r("code",[e._v("a.js")]),e._v("。 为了防止无限循环，将 "),r("code",[e._v("a.js")]),e._v(" 导出对象的未完成副本返回给 "),r("code",[e._v("b.js")]),e._v(" 模块。 然后 "),r("code",[e._v("b.js")]),e._v(" 完成加载，并将其 "),r("code",[e._v("exports")]),e._v(" 对象提供给 "),r("code",[e._v("a.js")]),e._v(" 模块。")]),e._v(" "),r("p",[e._v("到 "),r("code",[e._v("main.js")]),e._v(" 加载这两个模块时，它们都已完成。 因此，该程序的输出将是：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("$ node main.js\nmain starting\na starting\nb starting\nin b, a.done = false\nb done\nin a, b.done = true\na done\nin main, a.done = true, b.done = true\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br")])]),r("p",[e._v("需要仔细规划以允许循环模块依赖项在应用程序中正常工作。")]),e._v(" "),r("h3",{attrs:{id:"文件模块"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#文件模块"}},[e._v("#")]),e._v(" 文件模块"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#file-modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/file_modules.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("如果找不到确切的文件名，Node.js 将尝试加载所需的文件名，并添加扩展名："),r("code",[e._v(".js")]),e._v("、"),r("code",[e._v(".json")]),e._v("，最后是 "),r("code",[e._v(".node")]),e._v("。")]),e._v(" "),r("p",[r("code",[e._v(".js")]),e._v(" 文件被解释为 JavaScript 文本文件，而 "),r("code",[e._v(".json")]),e._v(" 文件被解析为 JSON 文本文件。 "),r("code",[e._v(".node")]),e._v(" 文件被解释为加载了 "),r("code",[e._v("process.dlopen()")]),e._v(" 的编译插件模块。")]),e._v(" "),r("p",[e._v("以 "),r("code",[e._v("'/'")]),e._v(" 为前缀的必需模块是文件的绝对路径。 例如，"),r("code",[e._v("require('/home/marco/foo.js')")]),e._v(" 将在 "),r("code",[e._v("/home/marco/foo.js")]),e._v(" 加载文件。")]),e._v(" "),r("p",[e._v("以 "),r("code",[e._v("'./'")]),e._v(" 为前缀的必需模块与调用 "),r("code",[e._v("require()")]),e._v(" 的文件相关。 也就是说，"),r("code",[e._v("circle.js")]),e._v(" 必须和 "),r("code",[e._v("foo.js")]),e._v(" 在同一个目录下，"),r("code",[e._v("require('./circle')")]),e._v(" 才能找到它。")]),e._v(" "),r("p",[e._v("如果没有前导 "),r("code",[e._v("'/'")]),e._v("、"),r("code",[e._v("'./'")]),e._v(" 或 "),r("code",[e._v("'../'")]),e._v(" 来指示文件，则该模块必须是核心模块或从 "),r("code",[e._v("node_modules")]),e._v(" 文件夹加载。")]),e._v(" "),r("p",[e._v("如果给定的路径不存在，则 "),r("code",[e._v("require()")]),e._v(" 将抛出 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/errors.html#errors_class_error",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("Error")]),r("OutboundLink")],1),e._v("，其 "),r("code",[e._v("code")]),e._v(" 属性设置为 "),r("code",[e._v("'MODULE_NOT_FOUND'")]),e._v("。")]),e._v(" "),r("h3",{attrs:{id:"目录作为模块"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#目录作为模块"}},[e._v("#")]),e._v(" 目录作为模块"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#folders-as-modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/folders_as_modules.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("将程序和库组织到自包含目录中，然后为这些目录提供单个入口点是很方便的。 可以通过三种方式将文件夹作为参数传给 "),r("code",[e._v("require()")]),e._v("。")]),e._v(" "),r("p",[e._v("首先是在文件夹的根目录创建 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/packages.html#packages_node_js_package_json_field_definitions",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("package.json")]),r("OutboundLink")],1),e._v(" 文件，指定 "),r("code",[e._v("main")]),e._v(" 模块。 一个示例 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/packages.html#packages_node_js_package_json_field_definitions",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("package.json")]),r("OutboundLink")],1),e._v(" 文件可能如下所示：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v('{ "name" : "some-library",\n  "main" : "./lib/some-library.js" }\n')])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("如果这是在 "),r("code",[e._v("./some-library")]),e._v(" 的文件夹中，则 "),r("code",[e._v("require('./some-library')")]),e._v(" 将尝试加载 "),r("code",[e._v("./some-library/lib/some-library.js")]),e._v("。")]),e._v(" "),r("p",[e._v("这就是 Node.js 中对 "),r("code",[e._v("package.json")]),e._v(" 文件的认识程度。")]),e._v(" "),r("p",[e._v("如果目录中不存在 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/packages.html#packages_node_js_package_json_field_definitions",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("package.json")]),r("OutboundLink")],1),e._v(" 文件，或者 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/packages.html#packages_main",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v('"main"')]),r("OutboundLink")],1),e._v(" 条目丢失或无法解析，则 Node.js 将尝试从该目录中加载 "),r("code",[e._v("index.js")]),e._v(" 或 "),r("code",[e._v("index.node")]),e._v(" 文件。 例如，如果前面的示例中没有 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/packages.html#packages_node_js_package_json_field_definitions",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("package.json")]),r("OutboundLink")],1),e._v(" 文件，则 "),r("code",[e._v("require('./some-library')")]),e._v(" 将尝试加载：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("./some-library/index.js")])]),e._v(" "),r("li",[r("code",[e._v("./some-library/index.node")])])]),e._v(" "),r("p",[e._v("如果这些尝试失败，Node.js 将报告整个模块丢失，并显示默认错误：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Error: Cannot find module 'some-library'\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("h3",{attrs:{id:"从-node-modules-目录加载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#从-node-modules-目录加载"}},[e._v("#")]),e._v(" 从 node_modules 目录加载"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#loading-from-node_modules-folders",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/loading_from_node_modules_folders.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("如果传给 "),r("code",[e._v("require()")]),e._v(" 的模块标识符不是"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_core_modules",target:"_blank",rel:"noopener noreferrer"}},[e._v("核心"),r("OutboundLink")],1),e._v("模块，并且不以 "),r("code",[e._v("'/'")]),e._v("、"),r("code",[e._v("'../'")]),e._v(" 或 "),r("code",[e._v("'./'")]),e._v(" 开头，则 Node.js 从当前模块的父目录开始，并添加 "),r("code",[e._v("/node_modules")]),e._v("，并尝试从该位置加载模块。 Node.js 不会将 "),r("code",[e._v("node_modules")]),e._v(" 附加到已经以 "),r("code",[e._v("node_modules")]),e._v(" 结尾的路径。")]),e._v(" "),r("p",[e._v("如果在那里找不到它，则它移动到父目录，依此类推，直到到达文件系统的根目录。")]),e._v(" "),r("p",[e._v("例如，如果 "),r("code",[e._v("'/home/ry/projects/foo.js'")]),e._v(" 处的文件调用 "),r("code",[e._v("require('bar.js')")]),e._v("，则 Node.js 将按以下顺序查找以下位置：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("/home/ry/projects/node_modules/bar.js")])]),e._v(" "),r("li",[r("code",[e._v("/home/ry/node_modules/bar.js")])]),e._v(" "),r("li",[r("code",[e._v("/home/node_modules/bar.js")])]),e._v(" "),r("li",[r("code",[e._v("/node_modules/bar.js")])])]),e._v(" "),r("p",[e._v("这允许程序本地化它们的依赖项，这样它们就不会发生冲突。")]),e._v(" "),r("p",[e._v("通过在模块名称后包含路径后缀，可以要求与模块一起分发的特定文件或子模块。 例如，"),r("code",[e._v("require('example-module/path/to/file')")]),e._v(" 将相对于 "),r("code",[e._v("example-module")]),e._v(" 所在的位置解析 "),r("code",[e._v("path/to/file")]),e._v("。 后缀路径遵循相同的模块解析语义。")]),e._v(" "),r("h3",{attrs:{id:"从全局目录加载"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#从全局目录加载"}},[e._v("#")]),e._v(" 从全局目录加载"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#loading-from-the-global-folders",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/loading_from_the_global_folders.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("如果 "),r("code",[e._v("NODE_PATH")]),e._v(" 环境变量设置为以冒号分隔的绝对路径列表，则 Node.js 将在这些路径中搜索模块（如果它们在其他地方找不到）。")]),e._v(" "),r("p",[e._v("在 Windows 上，"),r("code",[e._v("NODE_PATH")]),e._v(" 由分号 ("),r("code",[e._v(";")]),e._v(") 而不是冒号分隔。")]),e._v(" "),r("p",[e._v("在定义当前的"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_all_together",target:"_blank",rel:"noopener noreferrer"}},[e._v("模块解析"),r("OutboundLink")],1),e._v("算法之前，"),r("code",[e._v("NODE_PATH")]),e._v(" 最初是为了支持从不同路径加载模块而创建的。")]),e._v(" "),r("p",[r("code",[e._v("NODE_PATH")]),e._v(" 仍然受支持，但现在 Node.js 生态系统已经确定了用于定位依赖模块的约定，因此不太必要。 有时，当不知道必须设置 "),r("code",[e._v("NODE_PATH")]),e._v(" 时，依赖 "),r("code",[e._v("NODE_PATH")]),e._v(" 的部署会表现出意外的行为。 有时，模块的依赖项会发生变化，导致在搜索 "),r("code",[e._v("NODE_PATH")]),e._v(" 时加载不同的版本（甚至不同的模块）。")]),e._v(" "),r("p",[e._v("此外，Node.js 将在以下 GLOBAL_FOLDERS 列表中搜索：")]),e._v(" "),r("ul",[r("li",[e._v("1: "),r("code",[e._v("$HOME/.node_modules")])]),e._v(" "),r("li",[e._v("2: "),r("code",[e._v("$HOME/.node_libraries")])]),e._v(" "),r("li",[e._v("3: "),r("code",[e._v("$PREFIX/lib/node")])])]),e._v(" "),r("p",[e._v("其中 "),r("code",[e._v("$HOME")]),e._v(" 是用户的主目录，"),r("code",[e._v("$PREFIX")]),e._v(" 是 Node.js 配置的 "),r("code",[e._v("node_prefix")]),e._v("。")]),e._v(" "),r("p",[e._v("这些主要是出于历史原因。")]),e._v(" "),r("p",[e._v("强烈建议将依赖项放在本地 "),r("code",[e._v("node_modules")]),e._v(" 文件夹中。 这些将加载得更快，更可靠。")]),e._v(" "),r("h3",{attrs:{id:"模块封装器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#模块封装器"}},[e._v("#")]),e._v(" 模块封装器"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#the-module-wrapper",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/the_module_wrapper.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("在执行模块代码之前，Node.js 将使用如下所示的函数封装器对其进行封装：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("(function(exports, require, module, __filename, __dirname) {\n// 模块代码实际存在于此处\n});\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br")])]),r("p",[e._v("通过这样做，Node.js 实现了以下几点：")]),e._v(" "),r("ul",[r("li",[e._v("它将顶层变量（用 "),r("code",[e._v("var")]),e._v("、"),r("code",[e._v("const")]),e._v(" 或 "),r("code",[e._v("let")]),e._v(" 定义）保持在模块而不是全局对象的范围内。")]),e._v(" "),r("li",[e._v("它有助于提供一些实际特定于模块的全局变量，例如：\n"),r("ul",[r("li",[r("code",[e._v("module")]),e._v(" 和 "),r("code",[e._v("exports")]),e._v(" 对象，实现者可以用来从模块中导出值。")]),e._v(" "),r("li",[e._v("便利变量 "),r("code",[e._v("__filename")]),e._v(" 和 "),r("code",[e._v("__dirname")]),e._v("，包含模块的绝对文件名和目录路径。")])])])]),e._v(" "),r("h3",{attrs:{id:"模块作用域"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#模块作用域"}},[e._v("#")]),e._v(" 模块作用域"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#the-module-scope",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("h4",{attrs:{id:"dirname"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#dirname"}},[e._v("#")]),e._v(" "),r("code",[e._v("__dirname")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#__dirname",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/dirname.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.27")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("当前模块的目录名。 这与 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_filename",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("__filename")]),r("OutboundLink")],1),e._v(" 的 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/path.html#path_path_dirname_path",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("path.dirname()")]),r("OutboundLink")],1),e._v(" 相同。")]),e._v(" "),r("p",[e._v("示例：从 "),r("code",[e._v("/Users/mjr")]),e._v(" 运行 "),r("code",[e._v("node example.js")])]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("console.log(__dirname);\n// 打印: /Users/mjr\nconsole.log(path.dirname(__filename));\n// 打印: /Users/mjr\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("h4",{attrs:{id:"filename"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#filename"}},[e._v("#")]),e._v(" "),r("code",[e._v("__filename")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#__filename",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/filename.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.0.1")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("当前模块的文件名。 这是当前模块文件的已解析符号链接的绝对路径。")]),e._v(" "),r("p",[e._v("对于主程序，这不一定与命令行中使用的文件名相同。")]),e._v(" "),r("p",[e._v("当前模块的目录名见 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_dirname",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("__dirname")]),r("OutboundLink")],1),e._v("。")]),e._v(" "),r("p",[e._v("示例：")]),e._v(" "),r("p",[e._v("从 "),r("code",[e._v("/Users/mjr")]),e._v(" 运行 "),r("code",[e._v("node example.js")])]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("console.log(__filename);\n// 打印: /Users/mjr/example.js\nconsole.log(__dirname);\n// 打印: /Users/mjr\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("p",[e._v("给定两个模块："),r("code",[e._v("a")]),e._v(" 和 "),r("code",[e._v("b")]),e._v("，其中 "),r("code",[e._v("b")]),e._v(" 是 "),r("code",[e._v("a")]),e._v(" 的依赖项，且目录结构为：")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("/Users/mjr/app/a.js")])]),e._v(" "),r("li",[r("code",[e._v("/Users/mjr/app/node_modules/b/b.js")])])]),e._v(" "),r("p",[e._v("在 "),r("code",[e._v("b.js")]),e._v(" 中对 "),r("code",[e._v("__filename")]),e._v(" 的引用将返回 "),r("code",[e._v("/Users/mjr/app/node_modules/b/b.js")]),e._v("，而在 "),r("code",[e._v("a.js")]),e._v(" 中对 "),r("code",[e._v("__filename")]),e._v(" 的引用将返回 "),r("code",[e._v("/Users/mjr/app/a.js")]),e._v("。")]),e._v(" "),r("h4",{attrs:{id:"exports"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#exports"}},[e._v("#")]),e._v(" "),r("code",[e._v("exports")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#exports",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/exports.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.12")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[r("Object",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("对 "),r("code",[e._v("module.exports")]),e._v(" 的引用，其输入更短。 有关何时使用 "),r("code",[e._v("exports")]),e._v(" 和何时使用 "),r("code",[e._v("module.exports")]),e._v(" 的详细信息，请参阅有关"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_exports_shortcut",target:"_blank",rel:"noopener noreferrer"}},[e._v("导出的快捷方式"),r("OutboundLink")],1),e._v("的章节。")]),e._v(" "),r("h4",{attrs:{id:"module"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[e._v("#")]),e._v(" "),r("code",[e._v("module")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#module",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api/modules.html#the-module-object",target:"_blank",rel:"noopener noreferrer"}},[r("module",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("对当前模块的引用，请参阅有关 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_the_module_object",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("module")]),e._v(" 对象"),r("OutboundLink")],1),e._v("的部分。 特别是，"),r("code",[e._v("module.exports")]),e._v(" 用于定义模块通过 "),r("code",[e._v("require()")]),e._v(" 导出和提供的内容。")]),e._v(" "),r("h4",{attrs:{id:"require-id"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-id"}},[e._v("#")]),e._v(" "),r("code",[e._v("require(id)")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#requireid",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/require_id.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.13")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("id")]),e._v(" "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1),e._v(" 模块名称或路径")]),e._v(" "),r("li",[e._v("返回: "),r("a",{attrs:{href:"http://url.nodejs.cn/6sTGdS",target:"_blank",rel:"noopener noreferrer"}},[r("any",[r("OutboundLink")],1)],1),e._v(" 导出的模块内容")])]),e._v(" "),r("p",[e._v("用于导入模块、"),r("code",[e._v("JSON")]),e._v(" 和本地文件。 模块可以从 "),r("code",[e._v("node_modules")]),e._v(" 导入。 可以使用相对路径（例如 "),r("code",[e._v("./")]),e._v("、"),r("code",[e._v("./foo")]),e._v("、"),r("code",[e._v("./bar/baz")]),e._v("、"),r("code",[e._v("../foo")]),e._v("）导入本地模块和 JSON 文件，该路径将根据 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_dirname",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("__dirname")]),r("OutboundLink")],1),e._v("（如果有定义）命名的目录或当前工作目录进行解析。 POSIX 风格的相对路径以独立于操作系统的方式解析，这意味着上面的示例将在 Windows 上以与在 Unix 系统上相同的方式工作。")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("// 使用相对于 `__dirname` 或当前工作目录的路径导入本地模块。\n//（在 Windows 上，这将解析为 .\\path\\myLocalModule。）\nconst myLocalModule = require('./path/myLocalModule');\n\n// 导入 JSON 文件：\nconst jsonData = require('./path/filename.json');\n\n// 从 node_modules 或 Node.js 内置模块导入模块：\nconst crypto = require('crypto');\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br")])]),r("h5",{attrs:{id:"require-cache"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-cache"}},[e._v("#")]),e._v(" "),r("code",[e._v("require.cache")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#requirecache",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/require_cache.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.3.0")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[r("Object",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("模块在需要时缓存在此对象中。 通过从此对象中删除键值，下一次 "),r("code",[e._v("require")]),e._v(" 将重新加载模块。 这不适用于"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/addons.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("原生插件"),r("OutboundLink")],1),e._v("，因为重新加载会导致错误。")]),e._v(" "),r("p",[e._v("添加或替换条目也是可能的。")]),e._v(" "),r("p",[e._v("小心使用！")]),e._v(" "),r("h5",{attrs:{id:"require-extensions"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-extensions"}},[e._v("#")]),e._v(" "),r("code",[e._v("require.extensions")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#requireextensions",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/require_extensions.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.3.0弃用于: v0.10.6")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[r("Object",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("指导 "),r("code",[e._v("require")]),e._v(" 如何处理某些文件扩展名。")]),e._v(" "),r("p",[e._v("将扩展名为 "),r("code",[e._v(".sjs")]),e._v(" 的文件处理为 "),r("code",[e._v(".js")]),e._v("：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("require.extensions['.sjs'] = require.extensions['.js'];\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("p",[r("strong",[e._v("已弃用。")]),e._v(" 过去，此列表用于通过按需编译将非 JavaScript 模块加载到 Node.js 中。 但是，在实践中，有很多更好的方法可以做到这一点，例如通过其他一些 Node.js 程序加载模块，或者提前将它们编译为 JavaScript。")]),e._v(" "),r("p",[e._v("避免使用 "),r("code",[e._v("require.extensions")]),e._v("。 使用可能会导致细微的错误，并且每个注册的扩展程序解决扩展程序的速度都会变慢。")]),e._v(" "),r("h5",{attrs:{id:"require-main"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-main"}},[e._v("#")]),e._v(" "),r("code",[e._v("require.main")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#requiremain",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/require_main.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.17")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api/modules.html#the-module-object",target:"_blank",rel:"noopener noreferrer"}},[r("module",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[r("code",[e._v("Module")]),e._v(" 对象表示 Node.js 进程启动时加载的入口脚本。 请参阅"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_accessing_the_main_module",target:"_blank",rel:"noopener noreferrer"}},[e._v("“访问主模块”"),r("OutboundLink")],1),e._v("。")]),e._v(" "),r("p",[e._v("在 "),r("code",[e._v("entry.js")]),e._v(" 脚本中：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("console.log(require.main);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("node entry.js\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br")])]),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("Module {\n  id: '.',\n  path: '/absolute/path/to',\n  exports: {},\n  parent: null,\n  filename: '/absolute/path/to/entry.js',\n  loaded: false,\n  children: [],\n  paths:\n   [ '/absolute/path/to/node_modules',\n     '/absolute/path/node_modules',\n     '/absolute/node_modules',\n     '/node_modules' ] }\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br")])]),r("h5",{attrs:{id:"require-resolve-request-options"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-resolve-request-options"}},[e._v("#")]),e._v(" "),r("code",[e._v("require.resolve(request[, options])")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#requireresolverequest-options",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/require_resolve_request_options.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[r("code",[e._v("request")]),e._v(" "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1),e._v(" 要解析的模块路径。")]),e._v(" "),r("li",[r("code",[e._v("options")]),e._v(" "),r("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[r("Object",[r("OutboundLink")],1)],1),e._v(" "),r("ul",[r("li",[r("code",[e._v("paths")]),e._v(" "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[e._v("<string[]>"),r("OutboundLink")],1),e._v(" 从中解析模块位置的路径。 如果存在，则使用这些路径而不是默认的解析路径，除了 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_loading_from_the_global_folders",target:"_blank",rel:"noopener noreferrer"}},[e._v("GLOBAL_FOLDERS"),r("OutboundLink")],1),e._v("（例如 "),r("code",[e._v("$HOME/.node_modules")]),e._v("，其总是被包含在内）。 这些路径中的每一个都用作模块解析算法的起点，这意味着从此位置检查 "),r("code",[e._v("node_modules")]),e._v(" 层级。")])])]),e._v(" "),r("li",[e._v("返回: "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("使用内部的 "),r("code",[e._v("require()")]),e._v(" 工具查找模块的位置，但不加载模块，只返回解析的文件名。")]),e._v(" "),r("p",[e._v("如果找不到模块，则会抛出 "),r("code",[e._v("MODULE_NOT_FOUND")]),e._v(" 错误。")]),e._v(" "),r("h6",{attrs:{id:"require-resolve-paths-request"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#require-resolve-paths-request"}},[e._v("#")]),e._v(" "),r("code",[e._v("require.resolve.paths(request)")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#requireresolvepathsrequest",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/require_resolve_paths_request.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v8.9.0")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("request")]),e._v(" "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1),e._v(" 正在检索其查找路径的模块路径。")]),e._v(" "),r("li",[e._v("返回: "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[e._v("<string[]>"),r("OutboundLink")],1),e._v(" | "),r("a",{attrs:{href:"http://url.nodejs.cn/334hvC",target:"_blank",rel:"noopener noreferrer"}},[r("null",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("如果 "),r("code",[e._v("request")]),e._v(" 字符串引用核心模块，例如 "),r("code",[e._v("http")]),e._v(" 或 "),r("code",[e._v("fs")]),e._v("，则返回包含在解析 "),r("code",[e._v("request")]),e._v(" 或 "),r("code",[e._v("null")]),e._v(" 期间搜索的路径的数组。")]),e._v(" "),r("h3",{attrs:{id:"module-对象"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-对象"}},[e._v("#")]),e._v(" module 对象"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#the-module-object",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/the_module_object.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[r("Object",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("在每个模块中，"),r("code",[e._v("module")]),e._v(" 自由变量是对代表当前模块的对象的引用。 为方便起见，"),r("code",[e._v("module.exports")]),e._v(" 也可通过 "),r("code",[e._v("exports")]),e._v(" 模块全局访问。 "),r("code",[e._v("module")]),e._v(" 实际上不是全局的，而是每个模块本地的。")]),e._v(" "),r("h4",{attrs:{id:"module-children"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-children"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.children")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modulechildren",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_children.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api/modules.html#the-module-object",target:"_blank",rel:"noopener noreferrer"}},[e._v("<module[]>"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("这个模块首次需要的对象。")]),e._v(" "),r("h4",{attrs:{id:"module-exports"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-exports"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.exports")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#moduleexports",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_exports.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/jzn6Ao",target:"_blank",rel:"noopener noreferrer"}},[r("Object",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[r("code",[e._v("module.exports")]),e._v(" 对象由 "),r("code",[e._v("Module")]),e._v(" 系统创建。 有时这是不可接受的；许多人希望他们的模块成为某个类的实例。 为此，则将所需的导出对象赋值给 "),r("code",[e._v("module.exports")]),e._v("。 将所需的对象赋值给 "),r("code",[e._v("exports")]),e._v(" 只会重新绑定本地的 "),r("code",[e._v("exports")]),e._v(" 变量，这可能不是想要的。")]),e._v(" "),r("p",[e._v("例如，假设正在制作一个名为 "),r("code",[e._v("a.js")]),e._v(" 的模块：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const EventEmitter = require('events');\n\nmodule.exports = new EventEmitter();\n\n// 做一些工作，一段时间后从模块本身触发 'ready' 事件。\nsetTimeout(() => {\n  module.exports.emit('ready');\n}, 1000);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br")])]),r("p",[e._v("然后在另一个文件中可以这样做：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const a = require('./a');\na.on('ready', () => {\n  console.log('module \"a\" is ready');\n});\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br")])]),r("p",[e._v("赋值给 "),r("code",[e._v("module.exports")]),e._v(" 必须立即完成。 不能在任何回调中完成。 以下不起作用：")]),e._v(" "),r("p",[r("code",[e._v("x.js")]),e._v(":")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("setTimeout(() => {\n  module.exports = { a: 'hello' };\n}, 0);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br")])]),r("p",[r("code",[e._v("y.js")]),e._v(":")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("const x = require('./x');\nconsole.log(x.a);\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("h5",{attrs:{id:"导出的快捷方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#导出的快捷方式"}},[e._v("#")]),e._v(" 导出的快捷方式"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#exports-shortcut",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/exports_shortcut.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("p",[r("code",[e._v("exports")]),e._v(" 变量在模块的文件级作用域内可用，并在评估模块之前被分配 "),r("code",[e._v("module.exports")]),e._v(" 的值。")]),e._v(" "),r("p",[e._v("它允许一个快捷方式，以便 "),r("code",[e._v("module.exports.f = ...")]),e._v(" 可以更简洁地写成 "),r("code",[e._v("exports.f = ...")]),e._v("。 但是，请注意，与任何变量一样，如果将新值分配给 "),r("code",[e._v("exports")]),e._v("，则它就不再绑定到 "),r("code",[e._v("module.exports")]),e._v("：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("module.exports.hello = true; // 从模块的 require 中导出\nexports = { hello: false };  // 未导出，仅在模块中可用\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br")])]),r("p",[e._v("当 "),r("code",[e._v("module.exports")]),e._v(" 属性被新对象完全替换时，通常也会重新分配 "),r("code",[e._v("exports")]),e._v("：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("module.exports = exports = function Constructor() {\n  // ... 等等。\n};\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br")])]),r("p",[e._v("为了阐明该行为，想象一下 "),r("code",[e._v("require()")]),e._v(" 的这个假设实现，它与 "),r("code",[e._v("require()")]),e._v(" 的实际实现非常相似：")]),e._v(" "),r("div",{staticClass:"language- line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-text"}},[r("code",[e._v("function require(/* ... */) {\n  const module = { exports: {} };\n  ((module, exports) => {\n    // 模块代码在这里。 在本例中，定义一个函数。\n    function someFunc() {}\n    exports = someFunc;\n    // 此时，exports 不再是 module.exports 的快捷方式，\n    // 并且此模块仍然会导出空的默认对象。\n    module.exports = someFunc;\n    // 此时，该模块现在将导出 someFunc，\n    // 而不是默认对象。\n  })(module, module.exports);\n  return module.exports;\n}\n")])]),e._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[e._v("1")]),r("br"),r("span",{staticClass:"line-number"},[e._v("2")]),r("br"),r("span",{staticClass:"line-number"},[e._v("3")]),r("br"),r("span",{staticClass:"line-number"},[e._v("4")]),r("br"),r("span",{staticClass:"line-number"},[e._v("5")]),r("br"),r("span",{staticClass:"line-number"},[e._v("6")]),r("br"),r("span",{staticClass:"line-number"},[e._v("7")]),r("br"),r("span",{staticClass:"line-number"},[e._v("8")]),r("br"),r("span",{staticClass:"line-number"},[e._v("9")]),r("br"),r("span",{staticClass:"line-number"},[e._v("10")]),r("br"),r("span",{staticClass:"line-number"},[e._v("11")]),r("br"),r("span",{staticClass:"line-number"},[e._v("12")]),r("br"),r("span",{staticClass:"line-number"},[e._v("13")]),r("br"),r("span",{staticClass:"line-number"},[e._v("14")]),r("br")])]),r("h4",{attrs:{id:"module-filename"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-filename"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.filename")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modulefilename",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_filename.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("模块的完全解析文件名。")]),e._v(" "),r("h4",{attrs:{id:"module-id"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-id"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.id")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#moduleid",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_id.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("模块的标识符。 通常这是完全解析的文件名。")]),e._v(" "),r("h4",{attrs:{id:"module-loaded"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-loaded"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.loaded")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#moduleloaded",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_loaded.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/jFbvuT",target:"_blank",rel:"noopener noreferrer"}},[r("boolean",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("模块是否已完成加载，或正在加载。")]),e._v(" "),r("h4",{attrs:{id:"module-parent"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-parent"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.parent")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#moduleparent",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_parent.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.1.16弃用于: v12.19.0, v14.6.0")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api/modules.html#the-module-object",target:"_blank",rel:"noopener noreferrer"}},[r("module",[r("OutboundLink")],1)],1),e._v(" | "),r("a",{attrs:{href:"http://url.nodejs.cn/334hvC",target:"_blank",rel:"noopener noreferrer"}},[r("null",[r("OutboundLink")],1)],1),e._v(" | "),r("a",{attrs:{href:"http://url.nodejs.cn/8ym6ow",target:"_blank",rel:"noopener noreferrer"}},[r("undefined",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("首先需要这个模块的模块，如果当前模块是当前进程的入口点，则为 "),r("code",[e._v("null")]),e._v("，如果模块是由不是 CommonJS 模块的东西（例如：REPL 或 "),r("code",[e._v("import")]),e._v("）加载的，则为 "),r("code",[e._v("undefined")]),e._v("。")]),e._v(" "),r("h4",{attrs:{id:"module-path"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-path"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.path")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modulepath",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_path.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v11.14.0")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)])]),e._v(" "),r("p",[e._v("模块的目录名称。 这通常与 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modules_module_id",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("module.id")]),r("OutboundLink")],1),e._v(" 的 "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/path.html#path_path_dirname_path",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("path.dirname()")]),r("OutboundLink")],1),e._v(" 相同。")]),e._v(" "),r("h4",{attrs:{id:"module-paths"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-paths"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.paths")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modulepaths",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_paths.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.4.0")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[e._v("<string[]>"),r("OutboundLink")],1)])]),e._v(" "),r("p",[e._v("模块的搜索路径。")]),e._v(" "),r("h4",{attrs:{id:"module-require-id"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-require-id"}},[e._v("#")]),e._v(" "),r("code",[e._v("module.require(id)")]),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#modulerequireid",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/module_require_id.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("新增于: v0.5.1")]),e._v(" "),r("ul",[r("li",[r("code",[e._v("id")]),e._v(" "),r("a",{attrs:{href:"http://url.nodejs.cn/9Tw2bK",target:"_blank",rel:"noopener noreferrer"}},[r("string",[r("OutboundLink")],1)],1)]),e._v(" "),r("li",[e._v("返回: "),r("a",{attrs:{href:"http://url.nodejs.cn/6sTGdS",target:"_blank",rel:"noopener noreferrer"}},[r("any",[r("OutboundLink")],1)],1),e._v(" 导出的模块内容")])]),e._v(" "),r("p",[r("code",[e._v("module.require()")]),e._v(" 方法提供了一种加载模块的方法，就像从原始模块调用 "),r("code",[e._v("require()")]),e._v(" 一样。")]),e._v(" "),r("p",[e._v("为此，必须获得对 "),r("code",[e._v("module")]),e._v(" 对象的引用。 由于 "),r("code",[e._v("require()")]),e._v(" 返回 "),r("code",[e._v("module.exports")]),e._v("，而 "),r("code",[e._v("module")]),e._v(" 通常仅在特定模块的代码中可用，因此必须明确导出才能使用。")]),e._v(" "),r("h3",{attrs:{id:"module-对象-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#module-对象-2"}},[e._v("#")]),e._v(" Module 对象"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#the-module-object_1",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[e._v("This section was moved to "),r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_the_module_object",target:"_blank",rel:"noopener noreferrer"}},[e._v("Modules: "),r("code",[e._v("module")]),e._v(" core module"),r("OutboundLink")],1),e._v(".")]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_module_builtinmodules",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("module.builtinModules")]),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_module_createrequire_filename",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("module.createRequire(filename)")]),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_module_createrequirefrompath_filename",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("module.createRequireFromPath(filename)")]),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_module_syncbuiltinesmexports",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("module.syncBuiltinESMExports()")]),r("OutboundLink")],1)])]),e._v(" "),r("h3",{attrs:{id:"source-map-v3-的支持"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#source-map-v3-的支持"}},[e._v("#")]),e._v(" Source Map V3 的支持"),r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules.html#source-map-v3-support",target:"_blank",rel:"noopener noreferrer"}},[e._v("#"),r("OutboundLink")],1)]),e._v(" "),r("p",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/modules/source_map_v3_support.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("中英对照"),r("OutboundLink")],1)]),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_class_module_sourcemap",target:"_blank",rel:"noopener noreferrer"}},[e._v("类："),r("code",[e._v("module.SourceMap")]),r("OutboundLink")],1),e._v(" "),r("ul",[r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_new_sourcemap_payload",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("new SourceMap(payload)")]),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_sourcemap_payload",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("sourceMap.payload")]),r("OutboundLink")],1)]),e._v(" "),r("li",[r("a",{attrs:{href:"http://nodejs.cn/api-v12/module.html#module_sourcemap_findentry_linenumber_columnnumber",target:"_blank",rel:"noopener noreferrer"}},[r("code",[e._v("sourceMap.findEntry(lineNumber, columnNumber)")]),r("OutboundLink")],1)])])])])])}),[],!1,null,null,null);n.default=a.exports}}]);