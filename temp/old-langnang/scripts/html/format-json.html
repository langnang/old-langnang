<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Format JSON</title>
  <link href="https://fonts.font.im/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i"
    rel="stylesheet" />
  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="shortcut icon" href="./../favicon.ico" type="image/x-icon" />
  <style type="text/css">
  </style>
</head>

<body>
  <div class="container-fluid" id="app">
    <div class="row">
      <div class="col-md-12 text-center">
        <h2 class="">
          <button type="button" id="to" class="btn btn-primary btn-lg" style="margin:0 auto;"> Format JSON</button>
        </h2>
      </div>
      <div class="col-md-6">
        <textarea id="file_input" class="form-control" rows="30">{"General":{"installdir":"D:\\Dependency\\xampp","base_stack_name":"XAMPP","base_stack_key":"","base_stack_version":"7.2.32-0","base_stack_platform":"windows-x64"},"Apache":{"apache_server_port":"80","apache_server_ssl_port":"443","apache_root_directory":"/xampp/apache","apache_htdocs_directory":"D:\\Dependency\\xampp/htdocs","apache_domainname":"127.0.0.1","apache_configuration_directory":"D:\\Dependency\\xampp/apache/conf","apache_unique_service_name":""},"MySQL":{"mysql_port":"3306","mysql_host":"localhost","mysql_root_directory":"D:\\Dependency\\xampp\\mysql","mysql_binary_directory":"D:\\Dependency\\xampp\\mysql\\bin","mysql_data_directory":"D:\\Dependency\\xampp\\mysql\\data","mysql_configuration_directory":"D:\\Dependency\\xampp/mysql/bin","mysql_arguments":"-u root -P 3306","mysql_unique_service_name":""},"PHP":{"php_binary_directory":"D:\\Dependency\\xampp\\php","php_configuration_directory":"D:\\Dependency\\xampp\\php","php_extensions_directory":"D:\\Dependency\\xampp\\php\\ext"}}
        </textarea>
      </div>
      <div class="col-md-6">
        <textarea id="file_output" class="form-control" rows="30" readonly></textarea>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@langnang/js/lib/ln.js"></script>
  <script type="text/javascript">
    $(document).ready(function () {
      const json2ini = (json) => {
        return Object.keys(json).reduce((total, key) => {
          if (ln.typeOf(json[key]) == 'string') {
            total = `${key}=${json[key]}\n` + total;
          } else {
            total += `[${key}]\n` + Object.keys(json[key]).reduce((subTotal, subKey) => {
              subTotal = `${subKey}=${json[key][subKey]}\n` + subTotal;
              return subTotal;
            }, '');
          }
          return total;
        }, "");
      }
      const formatJSON = (json, depth = 0) => {
        const startMap = new Map();
        let start = '{';
        let end = '}';
        if (ln.typeOf(json) == 'array') {
          start = '[';
        }
      }
      $("#to").click(function () {
        let json = $("#file_input").val();
        if (!ln.isJSONString(json)) {
          return;
        }
        json = JSON.parse(json);
        // let ini = json2ini(json);
        // console.log(json);
        $("#file_output").val(formatJSON(json));
      })
    })
  </script>
</body>

</html>
